(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[78],{265:function(e,s,t){Promise.resolve().then(t.bind(t,8982))},8982:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return a}});var r=t(7437),n=t(2265);function a(){let[e,s]=(0,n.useState)(null),[t,a]=(0,n.useState)(!0),[o,d]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{a(!0),fetch("/api/posthog/status").then(e=>e.json()).then(e=>s(e)).catch(()=>s({connected:!1,error:"Request failed"})).finally(()=>a(!1))},[]),(0,r.jsxs)("div",{className:"mx-auto max-w-2xl space-y-8 p-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Integration"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Connect PostHog to power session replays and analytics in this app."})]}),(0,r.jsxs)("section",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-primary/10",children:(0,r.jsxs)("svg",{className:"h-6 w-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"PostHog"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Session recordings, events, and analytics"})]})]}),t?(0,r.jsxs)("div",{className:"mt-6 flex items-center gap-2 text-sm text-gray-500",children:[(0,r.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),"Checking connection…"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mt-6 flex flex-wrap items-center gap-3",children:[(0,r.jsxs)("span",{className:"inline-flex items-center gap-1.5 rounded-full px-3 py-1 text-sm font-medium ".concat((null==e?void 0:e.connected)?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"),children:[(0,r.jsx)("span",{className:"h-2 w-2 rounded-full ".concat((null==e?void 0:e.connected)?"bg-green-500":"bg-amber-500")}),(null==e?void 0:e.connected)?"Connected":"Not connected"]}),(null==e?void 0:e.connected)&&(null==e?void 0:e.projectId)&&(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["Project ID: ",e.projectId]}),(0,r.jsx)("button",{type:"button",onClick:function(){d(!0),fetch("/api/posthog/status").then(e=>e.json()).then(e=>s(e)).finally(()=>d(!1))},disabled:o,className:"rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:o?"Testing…":"Test connection"})]}),(null==e?void 0:e.error)&&(0,r.jsx)("div",{className:"mt-4 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-800",children:e.error}),(0,r.jsxs)("div",{className:"mt-6 border-t border-gray-100 pt-6",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"How to connect"}),(0,r.jsxs)("ol",{className:"mt-3 list-inside list-decimal space-y-2 text-sm text-gray-600",children:[(0,r.jsxs)("li",{children:["Log in to your PostHog project (e.g."," ",(0,r.jsx)("a",{href:"https://eu.posthog.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"eu.posthog.com"})," ","or us.posthog.com)."]}),(0,r.jsxs)("li",{children:["Create a ",(0,r.jsx)("strong",{children:"Personal API key"})," in PostHog: Project Settings → Personal API Keys → Create key."]}),(0,r.jsxs)("li",{children:["Ensure the key has at least: ",(0,r.jsx)("code",{className:"rounded bg-gray-100 px-1",children:"session_recording:read"}),","," ",(0,r.jsx)("code",{className:"rounded bg-gray-100 px-1",children:"sharing_configuration:read"}),","," ",(0,r.jsx)("code",{className:"rounded bg-gray-100 px-1",children:"sharing_configuration:write"})," (needed for in-app replay embed)."]}),(0,r.jsxs)("li",{children:["Add to your ",(0,r.jsx)("code",{className:"rounded bg-gray-100 px-1",children:".env.local"}),":",(0,r.jsx)("pre",{className:"mt-2 overflow-x-auto rounded-lg bg-gray-900 p-3 text-xs text-gray-100",children:"NEXT_POST_HOG_KEY=phx_your_key_here"})]}),(0,r.jsx)("li",{children:"Restart the dev server and click “Test connection” above."})]}),(0,r.jsx)("p",{className:"mt-4 text-sm text-gray-500",children:"Once connected, the Dashboard will show recordings and analytics, and you can watch session replays inside this site. Replays are embedded via PostHog’s public sharing (no PostHog login required in the iframe)."}),(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["This app uses the ",(0,r.jsx)("strong",{children:"EU embed URL"})," (",(0,r.jsx)("code",{className:"rounded bg-gray-100 px-1",children:"eu.posthog.com/embedded"}),") by default. If replays still don’t load, add to ",(0,r.jsx)("code",{className:"rounded bg-gray-100 px-1",children:".env.local"}),":"," ",(0,r.jsx)("code",{className:"rounded bg-gray-100 px-1",children:"POSTHOG_EMBED_BASE=https://app.posthog.com/embedded"})," and restart."]})]})]})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=265)}),_N_E=e.O()}]);