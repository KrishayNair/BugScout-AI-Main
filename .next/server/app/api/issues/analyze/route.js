"use strict";(()=>{var e={};e.id=925,e.ids=[925],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},92048:e=>{e.exports=require("fs")},55315:e=>{e.exports=require("path")},12685:(e,s,r)=>{r.r(s),r.d(s,{originalPathname:()=>m,patchFetch:()=>f,requestAsyncStorage:()=>u,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>d});var n={};r.r(n),r.d(n,{POST:()=>l});var t=r(73278),o=r(45002),i=r(54877);let a=JSON.parse('{"description":"Categories and types of issues PostHog can monitor. Use this to classify session replay findings and suggest fixes.","source":"PostHog dashboards, session replay, error tracking, feature flags, experiments","categories":[{"id":"product","name":"Product & User-Behavior Issues","description":"Signals that something is broken or confusing in the product from a user-behavior perspective.","issueTypes":[{"id":"funnel-dropoff","name":"Funnel & Conversion Issues","description":"Users failing to complete multi-step flows or conversion rates degrading.","examples":["Drop-offs between funnel steps","Sudden conversion rate decreases","Users looping or retrying the same step","Funnels performing differently by browser, country, device, or release"],"typicalAlert":"Checkout step 2 conversion dropped 25% after the latest deploy","postHogConfig":["Funnels","Trends","Breakdowns by property"]},{"id":"feature-adoption","name":"Feature Adoption Problems","description":"New or existing features not being used as expected.","examples":["New features not being discovered","Existing features suddenly unused","Feature used once but never again (low retention)","Power users abandoning a feature"],"postHogConfig":["Events","Funnels","Feature flags","Cohorts"]},{"id":"retention-churn","name":"Retention & Churn Signals","description":"Users not returning or failing to reach activation milestones.","examples":["Users not returning after signup","Activation milestones not reached","Drop in DAU/WAU/MAU","Churn correlated with a specific action or release"],"postHogConfig":["Retention","Cohorts","Trends"]}]},{"id":"ux","name":"UX & Usability Issues (Session Replay–Driven)","description":"Issues best detected via Session Replay when enabled in PostHog.","issueTypes":[{"id":"rage-frustration","name":"Rage & Frustration Signals","description":"User frustration visible in replay as repeated or ineffective interactions.","examples":["Rage clicks (rapid repeated clicks on same element)","Dead clicks (clicks with no UI response)","Excessive scrolling","Repeated form submissions"],"postHogConfig":["Session replay","Rage click / dead click filters","Event-based replay filters"]},{"id":"broken-ui-flows","name":"Broken or Confusing UI Flows","description":"Users stuck, looping, or abandoning flows without completing.","examples":["Users stuck on a page for unusually long time","Users navigating back and forth between the same pages","Modals opened but never completed","Forms started but abandoned"],"discoveryMethod":"Watching replays filtered by failed events; combining replays with funnel drop-offs","postHogConfig":["Session replay","Funnels","Replay filters by event"]}]},{"id":"errors","name":"Error & Reliability Issues (Error Tracking)","description":"Frontend-focused error tracking; PostHog connects errors to user behavior, not just stack traces.","issueTypes":[{"id":"js-frontend-errors","name":"JavaScript & Frontend Errors","description":"Uncaught exceptions and runtime errors in the browser.","examples":["Uncaught JS exceptions","Promise rejections","React rendering errors","Errors tied to a specific browser, OS, or release"],"postHogConfig":["Error tracking","Session replay linked to errors"]},{"id":"error-impact","name":"Error Impact Analysis","description":"Understanding who was affected and what they did before/after the error.","examples":["Which users experienced the error","What actions they took before/after","Whether the error caused funnel drop-off","Revenue or conversion impact of errors"],"postHogConfig":["Error tracking","Funnels","User paths"]}]},{"id":"performance","name":"Performance Issues (Web Vitals & Timing)","description":"Performance regressions that affect user experience; PostHog can monitor web vitals and timing.","issueTypes":[{"id":"web-vitals","name":"Web Performance Metrics","description":"Core Web Vitals and load/timing metrics.","examples":["LCP (Largest Contentful Paint)","FID / INP (First Input Delay / Interaction to Next Paint)","CLS (Cumulative Layout Shift)","Page load times","Route change durations (SPAs)"],"postHogConfig":["Web vitals","Performance trends","Breakdowns by device/browser"]},{"id":"performance-regressions","name":"Performance Regressions","description":"Slower experience after deploys or for specific segments.","examples":["Slower pages after a deploy","Performance issues only on mobile","Performance tied to a specific feature flag"],"typicalAlert":"LCP increased by 40% for users on mobile Safari","postHogConfig":["Trends","Breakdowns by device/browser/release"]}]},{"id":"releases","name":"Feature Flag & Release Issues","description":"Problems introduced or amplified by feature flags and releases; PostHog answers \'Is this feature breaking the product — and for whom?\'","issueTypes":[{"id":"flag-problems","name":"Feature Flag Problems","description":"Flags that cause errors, lower conversion, or worse latency.","examples":["Feature flag causing increased errors","Flag reducing conversion","Flag increasing latency","Flag impacting only a user segment"],"postHogConfig":["Feature flags","Trends by flag","Error tracking by flag"]},{"id":"rollout-killswitch","name":"Rollout & Kill-Switch Scenarios","description":"Monitoring gradual rollouts and need for rollback.","examples":["Gradual rollout monitoring","Immediate rollback if metrics degrade","Comparing flagged vs non-flagged users"],"postHogConfig":["Feature flags","Experiments","Alerts"]}]},{"id":"experimentation","name":"Experimentation & A/B Test Issues","description":"Issues with experiment design, integrity, or unintended side effects.","issueTypes":[{"id":"experiment-integrity","name":"Experiment Integrity Issues","description":"Problems that invalidate or complicate experiment results.","examples":["No statistically significant result","Sample ratio mismatch","Variant causing unintended side effects","Experiment improving one metric but hurting another"],"postHogConfig":["Experiments","Statistical significance","Variant comparison"]},{"id":"metric-conflicts","name":"Metric Conflicts","description":"Winning variant hurts another important metric.","examples":["Conversion ↑ but retention ↓","Engagement ↑ but revenue ↓","Performance ↓ in winning variant"],"postHogConfig":["Experiments","Multiple metrics","Trends by variant"]}]},{"id":"data-quality","name":"Data Quality & Tracking Issues","description":"Broken or inconsistent event tracking and schema; critical for reliable dashboards and alerts.","issueTypes":[{"id":"event-tracking","name":"Event Tracking Problems","description":"Events missing, duplicated, or malformed.","examples":["Events suddenly stop firing","Event volume spikes (duplicate tracking)","Missing properties","Incorrect property types"],"typicalDetection":"Dashboards flatline; sudden event explosions; funnel steps disappear","postHogConfig":["Events","Trends","Data management"]},{"id":"schema-consistency","name":"Schema & Consistency Issues","description":"Inconsistent naming or identification across the product.","examples":["Multiple names for the same event","Inconsistent user identification","Broken autocapture after DOM changes"],"postHogConfig":["Event definitions","Person properties","Autocapture settings"]}]},{"id":"business","name":"Business & Revenue Issues","description":"Revenue and conversion problems when revenue or subscription data is sent to PostHog.","issueTypes":[{"id":"revenue-monitoring","name":"Revenue Monitoring","description":"Drops in conversion or payment success.","examples":["Drop in trial → paid conversion","Failed payments after UI changes","Checkout errors tied to browsers or regions"],"postHogConfig":["Revenue trends","Funnels","Breakdowns by region/browser"]}]}],"alertingCapabilities":{"description":"PostHog can configure alerts for the following.","alertTypes":["Metric thresholds","% change over time","Funnel conversion drops","Error rate spikes","Performance regressions","Feature flag impact"],"destinations":["Slack","Email","Webhooks"]},"outOfScope":{"description":"PostHog is not designed for these; use other tools.","items":["Backend infrastructure monitoring (CPU, memory)","Log aggregation","Network-level tracing","Server uptime checks"]},"tlbr":[{"category":"Product","examples":"Funnel drop-offs, feature abandonment"},{"category":"UX","examples":"Rage clicks, dead clicks, confusion"},{"category":"Errors","examples":"Frontend crashes, JS exceptions"},{"category":"Performance","examples":"Web vitals, slow pages"},{"category":"Releases","examples":"Feature flag regressions"},{"category":"Experiments","examples":"A/B test side effects"},{"category":"Data","examples":"Broken tracking, missing events"},{"category":"Business","examples":"Conversion & revenue drops"}]}');var c=r(41644);async function l(e){let s=process.env.OPENAI_API_KEY;if(!s)return Response.json({issues:[],message:"OPENAI_API_KEY is not set"},{status:200});try{let r,n;let t=await e.json(),o=Array.isArray(t.recordings)?t.recordings:[],i=Array.isArray(t.pageEvents)?t.pageEvents:void 0;if(0===o.length)return Response.json({issues:[],agent:"issue-monitoring"});let l=(n="Session recordings:\n"+o.map(e=>[`Recording ${e.recordingId}:`,null!=e.consoleErrorCount?`${e.consoleErrorCount} console error(s)`:null,null!=e.clickCount?`${e.clickCount} clicks`:null,(e.rageClickCount??0)>0?`${e.rageClickCount} rage click(s)`:null,(e.deadClickCount??0)>0?`${e.deadClickCount} dead click(s)`:null,null!=e.durationSeconds?`duration ${e.durationSeconds}s`:null,e.startUrl?`start URL: ${e.startUrl}`:null,e.startPath?`start path: ${e.startPath}`:null].filter(Boolean).join(", ")).join("\n"),i?.length&&(n+="\n\nPage/events during session:\n"+i.slice(0,50).map(e=>`  ${e.event??"event"} ${e.url??e.path??""} ${e.timestamp??""}`.trim()).join("\n")),n),p=JSON.stringify(a,null,2),u=(0,c.p)(),d=`You are an Issue Monitoring Agent. You analyze PostHog live session data (session replay summaries and page events) and map each problem to PostHog's issue taxonomy. You do NOT suggest fixes — you only classify and pinpoint code location for a downstream Solution Agent.

Steps:
1. For each session recording with issues, pick exactly one PostHog category and issue type from the JSON below (use category id and issueTypes[].id).
2. Assign a severity tag: "Critical" (blocking, data loss, security), "High" (major UX/reliability), "Medium" (noticeable but workaround exists), "Low" (minor, cosmetic). Base it on impact and frequency signals (e.g. many rage clicks + errors = Critical; few dead clicks = Medium/Low).
3. Write a short title and 2–3 sentence description of what went wrong (from session replay: rage clicks, dead clicks, console errors, drop-offs, etc.).
4. Using the codebase map, identify the most likely file(s) where the bug or UX issue originates (codeLocation: file path). Prefer exact paths from the map (e.g. src/app/dashboard/resume-builder/page.tsx).
5. If you can infer a specific component or area (e.g. submit button, form handler), add a brief codeSnippetHint: 1–2 lines describing where to look or a minimal code snippet. Do not invent code — only hint based on route/URL and issue type.

PostHog issue categories (map each issue to one category and one issueType id):
${p}

${u}

Output valid JSON only, no markdown:
{
  "issues": [
    {
      "recordingId": "<id>",
      "posthogCategoryId": "<e.g. ux|errors|product|performance>",
      "posthogIssueTypeId": "<e.g. rage-frustration|dead-click|js-frontend-errors>",
      "severity": "<Critical|High|Medium|Low>",
      "title": "<short user-facing title>",
      "description": "<2-3 sentences>",
      "codeLocation": "<file path from codebase map>",
      "codeSnippetHint": "<optional 1-2 line hint or minimal snippet>",
      "startUrl": "<from recording if useful>"
    }
  ]
}
Match one entry per recording that has issues; omit recordings with no clear issue. severity must be exactly one of: Critical, High, Medium, Low.`,g=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:d},{role:"user",content:l}],response_format:{type:"json_object"},max_completion_tokens:2e3})});if(!g.ok){let e=await g.text();return console.error("OpenAI issue monitoring error:",g.status,e),Response.json({issues:[],agent:"issue-monitoring"},{status:200})}let m=await g.json(),f=m.choices?.[0]?.message?.content;if(!f)return Response.json({issues:[],agent:"issue-monitoring"});try{r=JSON.parse(f)}catch{return Response.json({issues:[],agent:"issue-monitoring"})}let h=["Critical","High","Medium","Low"],y=Array.isArray(r.issues)?r.issues.filter(e=>null!=e&&"string"==typeof e.recordingId&&"string"==typeof e.posthogCategoryId&&"string"==typeof e.posthogIssueTypeId&&"string"==typeof e.title&&"string"==typeof e.description&&"string"==typeof e.codeLocation&&h.includes(e.severity)):[];return Response.json({issues:y,agent:"issue-monitoring"})}catch(e){return console.error("Issue monitoring agent error:",e),Response.json({issues:[],agent:"issue-monitoring"})}}let p=new t.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/issues/analyze/route",pathname:"/api/issues/analyze",filename:"route",bundlePath:"app/api/issues/analyze/route"},resolvedPagePath:"C:\\Users\\RISHAY\\Downloads\\bugScout Frontend\\app\\api\\issues\\analyze\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:u,staticGenerationAsyncStorage:d,serverHooks:g}=p,m="/api/issues/analyze/route";function f(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:d})}},41644:(e,s,r)=>{r.d(s,{p:()=>i});var n=r(92048),t=r(55315);let o=null;function i(){let e=function(){if(o)return o;try{let e=(0,t.join)(process.cwd(),"CODEBASE_MAP.json"),s=(0,n.readFileSync)(e,"utf-8");return o=JSON.parse(s)}catch{return{files:[],fileToPurposeMap:{}}}}(),s=["Codebase map (use to suggest codeLocation and codeSnippetHint):",`Project: ${e.meta?.projectName??"Unknown"}`,""];return e.files?.length&&(s.push("Files (path -> role):"),e.files.forEach(e=>s.push(`  ${e.path} -> ${e.role}`))),e.fileToPurposeMap&&Object.keys(e.fileToPurposeMap).length>0&&(s.push(""),s.push("File purpose (path -> purpose):"),Object.entries(e.fileToPurposeMap).forEach(([e,r])=>s.push(`  ${e} -> ${r}`))),e.routing?.pages&&Object.keys(e.routing.pages).length>0&&(s.push(""),s.push("Routes (URL -> page/description):"),Object.entries(e.routing.pages).slice(0,30).forEach(([e,r])=>s.push(`  ${e} -> ${r}`))),s.join("\n")}},73278:(e,s,r)=>{e.exports=r(30517)}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),n=s.X(0,[379],()=>r(12685));module.exports=n})();