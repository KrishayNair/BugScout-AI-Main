"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/posthog/rage-dead-clicks/route";
exports.ids = ["app/api/posthog/rage-dead-clicks/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fposthog%2Frage-dead-clicks%2Froute&page=%2Fapi%2Fposthog%2Frage-dead-clicks%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fposthog%2Frage-dead-clicks%2Froute.ts&appDir=C%3A%5CUsers%5CRISHAY%5CDownloads%5CbugScout%20Frontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRISHAY%5CDownloads%5CbugScout%20Frontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fposthog%2Frage-dead-clicks%2Froute&page=%2Fapi%2Fposthog%2Frage-dead-clicks%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fposthog%2Frage-dead-clicks%2Froute.ts&appDir=C%3A%5CUsers%5CRISHAY%5CDownloads%5CbugScout%20Frontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRISHAY%5CDownloads%5CbugScout%20Frontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_RISHAY_Downloads_bugScout_Frontend_app_api_posthog_rage_dead_clicks_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/posthog/rage-dead-clicks/route.ts */ \"(rsc)/./app/api/posthog/rage-dead-clicks/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/posthog/rage-dead-clicks/route\",\n        pathname: \"/api/posthog/rage-dead-clicks\",\n        filename: \"route\",\n        bundlePath: \"app/api/posthog/rage-dead-clicks/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\RISHAY\\\\Downloads\\\\bugScout Frontend\\\\app\\\\api\\\\posthog\\\\rage-dead-clicks\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_RISHAY_Downloads_bugScout_Frontend_app_api_posthog_rage_dead_clicks_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/posthog/rage-dead-clicks/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwb3N0aG9nJTJGcmFnZS1kZWFkLWNsaWNrcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcG9zdGhvZyUyRnJhZ2UtZGVhZC1jbGlja3MlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZwb3N0aG9nJTJGcmFnZS1kZWFkLWNsaWNrcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNSSVNIQVklNUNEb3dubG9hZHMlNUNidWdTY291dCUyMEZyb250ZW5kJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNSSVNIQVklNUNEb3dubG9hZHMlNUNidWdTY291dCUyMEZyb250ZW5kJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUM4QztBQUMzSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2J1Z3Njb3V0LWZyb250ZW5kLz9hYmYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXFJJU0hBWVxcXFxEb3dubG9hZHNcXFxcYnVnU2NvdXQgRnJvbnRlbmRcXFxcYXBwXFxcXGFwaVxcXFxwb3N0aG9nXFxcXHJhZ2UtZGVhZC1jbGlja3NcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Bvc3Rob2cvcmFnZS1kZWFkLWNsaWNrcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Bvc3Rob2cvcmFnZS1kZWFkLWNsaWNrc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcG9zdGhvZy9yYWdlLWRlYWQtY2xpY2tzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcUklTSEFZXFxcXERvd25sb2Fkc1xcXFxidWdTY291dCBGcm9udGVuZFxcXFxhcHBcXFxcYXBpXFxcXHBvc3Rob2dcXFxccmFnZS1kZWFkLWNsaWNrc1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcG9zdGhvZy9yYWdlLWRlYWQtY2xpY2tzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fposthog%2Frage-dead-clicks%2Froute&page=%2Fapi%2Fposthog%2Frage-dead-clicks%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fposthog%2Frage-dead-clicks%2Froute.ts&appDir=C%3A%5CUsers%5CRISHAY%5CDownloads%5CbugScout%20Frontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRISHAY%5CDownloads%5CbugScout%20Frontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/posthog/rage-dead-clicks/route.ts":
/*!***************************************************!*\
  !*** ./app/api/posthog/rage-dead-clicks/route.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var _lib_posthog_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/posthog-api */ \"(rsc)/./lib/posthog-api.ts\");\n\nconst dynamic = \"force-dynamic\";\nfunction parseHogQLResults(data) {\n    const out = {};\n    const raw = data;\n    const rows = raw?.results ?? raw?.query_status?.results ?? (Array.isArray(raw?.result) ? raw.result : []);\n    const columns = raw.columns;\n    for (const row of rows){\n        if (Array.isArray(row) && columns) {\n            const sidIdx = columns.indexOf(\"session_id\");\n            const rageIdx = columns.indexOf(\"rage_count\");\n            const deadIdx = columns.indexOf(\"dead_count\");\n            const sid = sidIdx >= 0 ? row[sidIdx] : null;\n            const rage = rageIdx >= 0 ? Number(row[rageIdx]) || 0 : 0;\n            const dead = deadIdx >= 0 ? Number(row[deadIdx]) || 0 : 0;\n            if (sid != null && typeof sid === \"string\") out[sid] = {\n                rageClickCount: rage,\n                deadClickCount: dead\n            };\n        } else if (row && typeof row === \"object\") {\n            const r = row;\n            const sid = r.session_id;\n            if (sid == null || typeof sid !== \"string\") continue;\n            const rage = typeof r.rage_count === \"number\" ? r.rage_count : 0;\n            const dead = typeof r.dead_count === \"number\" ? r.dead_count : 0;\n            out[sid] = {\n                rageClickCount: rage,\n                deadClickCount: dead\n            };\n        }\n    }\n    return out;\n}\n/**\r\n * Fetches rage and dead click counts and maps them to recordings.\r\n * POST with body { recordings: [{ id, distinct_id?, start_time?, end_time?, recording_duration? }] }\r\n * to match by distinct_id + timestamp (reliable when recording id !== $session_id).\r\n * GET without body uses HogQL by session_id (assumes recording id === $session_id).\r\n */ async function GET() {\n    const empty = {};\n    try {\n        const query = {\n            query: {\n                kind: \"HogQLQuery\",\n                query: [\n                    \"SELECT\",\n                    \"  properties.$session_id AS session_id,\",\n                    \"  countIf(event = '$rageclick') AS rage_count,\",\n                    \"  countIf(event = '$dead_click') AS dead_count\",\n                    \"FROM events\",\n                    \"WHERE timestamp >= now() - INTERVAL 7 DAY\",\n                    \"  AND (event = '$rageclick' OR event = '$dead_click')\",\n                    \"  AND properties.$session_id IS NOT NULL\",\n                    \"GROUP BY properties.$session_id\"\n                ].join(\"\\n\")\n            }\n        };\n        const data = await (0,_lib_posthog_api__WEBPACK_IMPORTED_MODULE_0__.posthogPost)(\"/query/\", query);\n        return Response.json(parseHogQLResults(data));\n    } catch  {\n        return Response.json(empty);\n    }\n}\nasync function POST(request) {\n    const empty = {};\n    try {\n        const body = await request.json().catch(()=>({}));\n        const recordings = Array.isArray(body.recordings) ? body.recordings : [];\n        if (recordings.length === 0) return Response.json(empty);\n        const after = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString().slice(0, 19);\n        const [rageRes, deadRes] = await Promise.allSettled([\n            (0,_lib_posthog_api__WEBPACK_IMPORTED_MODULE_0__.posthogGet)(\"/events/\", {\n                event: \"$rageclick\",\n                limit: \"500\",\n                after\n            }),\n            (0,_lib_posthog_api__WEBPACK_IMPORTED_MODULE_0__.posthogGet)(\"/events/\", {\n                event: \"$dead_click\",\n                limit: \"500\",\n                after\n            })\n        ]);\n        const rageEvents = rageRes.status === \"fulfilled\" && rageRes.value?.results ? rageRes.value.results : [];\n        const deadEvents = deadRes.status === \"fulfilled\" && deadRes.value?.results ? deadRes.value.results : [];\n        const out = {};\n        for (const rec of recordings){\n            const did = rec.distinct_id ?? \"\";\n            let end;\n            if (rec.end_time) {\n                end = new Date(rec.end_time).getTime();\n            } else if (rec.start_time != null && rec.recording_duration != null) {\n                end = new Date(rec.start_time).getTime() + rec.recording_duration * 1000;\n            } else {\n                end = Date.now();\n            }\n            const start = rec.start_time ? new Date(rec.start_time).getTime() : 0;\n            let rage = 0;\n            let dead = 0;\n            for (const e of rageEvents){\n                if (e.distinct_id !== did) continue;\n                const t = e.timestamp ? new Date(e.timestamp).getTime() : 0;\n                if (t >= start && t <= end) rage++;\n            }\n            for (const e of deadEvents){\n                if (e.distinct_id !== did) continue;\n                const t = e.timestamp ? new Date(e.timestamp).getTime() : 0;\n                if (t >= start && t <= end) dead++;\n            }\n            if (rage > 0 || dead > 0) out[rec.id] = {\n                rageClickCount: rage,\n                deadClickCount: dead\n            };\n        }\n        return Response.json(out);\n    } catch  {\n        return Response.json(empty);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Bvc3Rob2cvcmFnZS1kZWFkLWNsaWNrcy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQzREO0FBRXJELE1BQU1FLFVBQVUsZ0JBQWdCO0FBT3ZDLFNBQVNDLGtCQUFrQkMsSUFBYTtJQUN0QyxNQUFNQyxNQUFzQixDQUFDO0lBQzdCLE1BQU1DLE1BQU1GO0lBS1osTUFBTUcsT0FDSkQsS0FBS0UsV0FDTEYsS0FBS0csY0FBY0QsV0FDbEJFLENBQUFBLE1BQU1DLE9BQU8sQ0FBQ0wsS0FBS00sVUFBVU4sSUFBSU0sTUFBTSxHQUFHLEVBQUU7SUFDL0MsTUFBTUMsVUFBVSxJQUFnQ0EsT0FBTztJQUN2RCxLQUFLLE1BQU1DLE9BQU9QLEtBQU07UUFDdEIsSUFBSUcsTUFBTUMsT0FBTyxDQUFDRyxRQUFRRCxTQUFTO1lBQ2pDLE1BQU1FLFNBQVNGLFFBQVFHLE9BQU8sQ0FBQztZQUMvQixNQUFNQyxVQUFVSixRQUFRRyxPQUFPLENBQUM7WUFDaEMsTUFBTUUsVUFBVUwsUUFBUUcsT0FBTyxDQUFDO1lBQ2hDLE1BQU1HLE1BQU1KLFVBQVUsSUFBSUQsR0FBRyxDQUFDQyxPQUFPLEdBQUc7WUFDeEMsTUFBTUssT0FBT0gsV0FBVyxJQUFJSSxPQUFPUCxHQUFHLENBQUNHLFFBQVEsS0FBSyxJQUFJO1lBQ3hELE1BQU1LLE9BQU9KLFdBQVcsSUFBSUcsT0FBT1AsR0FBRyxDQUFDSSxRQUFRLEtBQUssSUFBSTtZQUN4RCxJQUFJQyxPQUFPLFFBQVEsT0FBT0EsUUFBUSxVQUFVZCxHQUFHLENBQUNjLElBQUksR0FBRztnQkFBRUksZ0JBQWdCSDtnQkFBTUksZ0JBQWdCRjtZQUFLO1FBQ3RHLE9BQU8sSUFBSVIsT0FBTyxPQUFPQSxRQUFRLFVBQVU7WUFDekMsTUFBTVcsSUFBSVg7WUFDVixNQUFNSyxNQUFNTSxFQUFFQyxVQUFVO1lBQ3hCLElBQUlQLE9BQU8sUUFBUSxPQUFPQSxRQUFRLFVBQVU7WUFDNUMsTUFBTUMsT0FBTyxPQUFP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LFNBQVMsR0FBRyxJQUFJekIsS0FBS3VCLEVBQUVFLFNBQVMsRUFBRU4sT0FBTyxLQUFLO2dCQUMxRCxJQUFJSyxLQUFLRixTQUFTRSxLQUFLUCxLQUFLeEM7WUFDOUI7WUFDQSxLQUFLLE1BQU04QyxLQUFLVixXQUFZO2dCQUMxQixJQUFJVSxFQUFFUCxXQUFXLEtBQUtELEtBQUs7Z0JBQzNCLE1BQU1TLElBQUlELEVBQUVFLFNBQVMsR0FBRyxJQUFJekIsS0FBS3VCLEVBQUVFLFNBQVMsRUFBRU4sT0FBTyxLQUFLO2dCQUMxRCxJQUFJSyxLQUFLRixTQUFTRSxLQUFLUCxLQUFLdEM7WUFDOUI7WUFDQSxJQUFJRixPQUFPLEtBQUtFLE9BQU8sR0FBR2pCLEdBQUcsQ0FBQ29ELElBQUlZLEVBQUUsQ0FBQyxHQUFHO2dCQUFFOUMsZ0JBQWdCSDtnQkFBTUksZ0JBQWdCRjtZQUFLO1FBQ3ZGO1FBQ0EsT0FBT1ksU0FBU0MsSUFBSSxDQUFDOUI7SUFDdkIsRUFBRSxPQUFNO1FBQ04sT0FBTzZCLFNBQVNDLElBQUksQ0FBQ0w7SUFDdkI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2J1Z3Njb3V0LWZyb250ZW5kLy4vYXBwL2FwaS9wb3N0aG9nL3JhZ2UtZGVhZC1jbGlja3Mvcm91dGUudHM/M2Y3NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5pbXBvcnQgeyBwb3N0aG9nR2V0LCBwb3N0aG9nUG9zdCB9IGZyb20gXCJAL2xpYi9wb3N0aG9nLWFwaVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSBcImZvcmNlLWR5bmFtaWNcIjtcclxuXHJcbi8qKiBNYXAgc2Vzc2lvbl9pZCBvciByZWNvcmRpbmcgaWQgLT4geyByYWdlQ2xpY2tDb3VudCwgZGVhZENsaWNrQ291bnQgfSAqL1xyXG5leHBvcnQgdHlwZSBSYWdlRGVhZENvdW50cyA9IFJlY29yZDxzdHJpbmcsIHsgcmFnZUNsaWNrQ291bnQ6IG51bWJlcjsgZGVhZENsaWNrQ291bnQ6IG51bWJlciB9PjtcclxuXHJcbnR5cGUgUmVjb3JkaW5nSW5wdXQgPSB7IGlkOiBzdHJpbmc7IGRpc3RpbmN0X2lkPzogc3RyaW5nOyBzdGFydF90aW1lPzogc3RyaW5nOyBlbmRfdGltZT86IHN0cmluZzsgcmVjb3JkaW5nX2R1cmF0aW9uPzogbnVtYmVyIH07XHJcblxyXG5mdW5jdGlvbiBwYXJzZUhvZ1FMUmVzdWx0cyhkYXRhOiB1bmtub3duKTogUmFnZURlYWRDb3VudHMge1xyXG4gIGNvbnN0IG91dDogUmFnZURlYWRDb3VudHMgPSB7fTtcclxuICBjb25zdCByYXcgPSBkYXRhIGFzIHtcclxuICAgIHJlc3VsdHM/OiB1bmtub3duW107XHJcbiAgICByZXN1bHQ/OiB1bmtub3duO1xyXG4gICAgcXVlcnlfc3RhdHVzPzogeyByZXN1bHRzPzogdW5rbm93bltdIH07XHJcbiAgfTtcclxuICBjb25zdCByb3dzID1cclxuICAgIHJhdz8ucmVzdWx0cyA/P1xyXG4gICAgcmF3Py5xdWVyeV9zdGF0dXM/LnJlc3VsdHMgPz9cclxuICAgIChBcnJheS5pc0FycmF5KHJhdz8ucmVzdWx0KSA/IHJhdy5yZXN1bHQgOiBbXSk7XHJcbiAgY29uc3QgY29sdW1ucyA9IChyYXcgYXMgeyBjb2x1bW5zPzogc3RyaW5nW10gfSkuY29sdW1ucztcclxuICBmb3IgKGNvbnN0IHJvdyBvZiByb3dzKSB7XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShyb3cpICYmIGNvbHVtbnMpIHtcclxuICAgICAgY29uc3Qgc2lkSWR4ID0gY29sdW1ucy5pbmRleE9mKFwic2Vzc2lvbl9pZFwiKTtcclxuICAgICAgY29uc3QgcmFnZUlkeCA9IGNvbHVtbnMuaW5kZXhPZihcInJhZ2VfY291bnRcIik7XHJcbiAgICAgIGNvbnN0IGRlYWRJZHggPSBjb2x1bW5zLmluZGV4T2YoXCJkZWFkX2NvdW50XCIpO1xyXG4gICAgICBjb25zdCBzaWQgPSBzaWRJZHggPj0gMCA/IHJvd1tzaWRJZHhdIDogbnVsbDtcclxuICAgICAgY29uc3QgcmFnZSA9IHJhZ2VJZHggPj0gMCA/IE51bWJlcihyb3dbcmFnZUlkeF0pIHx8IDAgOiAwO1xyXG4gICAgICBjb25zdCBkZWFkID0gZGVhZElkeCA+PSAwID8gTnVtYmVyKHJvd1tkZWFkSWR4XSkgfHwgMCA6IDA7XHJcbiAgICAgIGlmIChzaWQgIT0gbnVsbCAmJiB0eXBlb2Ygc2lkID09PSBcInN0cmluZ1wiKSBvdXRbc2lkXSA9IHsgcmFnZUNsaWNrQ291bnQ6IHJhZ2UsIGRlYWRDbGlja0NvdW50OiBkZWFkIH07XHJcbiAgICB9IGVsc2UgaWYgKHJvdyAmJiB0eXBlb2Ygcm93ID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgIGNvbnN0IHIgPSByb3cgYXMgeyBzZXNzaW9uX2lkPzogc3RyaW5nOyByYWdlX2NvdW50PzogbnVtYmVyOyBkZWFkX2NvdW50PzogbnVtYmVyIH07XHJcbiAgICAgIGNvbnN0IHNpZCA9IHIuc2Vzc2lvbl9pZDtcclxuICAgICAgaWYgKHNpZCA9PSBudWxsIHx8IHR5cGVvZiBzaWQgIT09IFwic3RyaW5nXCIpIGNvbnRpbnVlO1xyXG4gICAgICBjb25zdCByYWdlID0gdHlwZW9mIHIucmFnZV9jb3VudCA9PT0gXCJudW1iZXJcIiA/IHIucmFnZV9jb3VudCA6IDA7XHJcbiAgICAgIGNvbnN0IGRlYWQgPSB0eXBlb2Ygci5kZWFkX2NvdW50ID09PSBcIm51bWJlclwiID8gci5kZWFkX2NvdW50IDogMDtcclxuICAgICAgb3V0W3NpZF0gPSB7IHJhZ2VDbGlja0NvdW50OiByYWdlLCBkZWFkQ2xpY2tDb3VudDogZGVhZCB9O1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gb3V0O1xyXG59XHJcblxyXG4vKipcclxuICogRmV0Y2hlcyByYWdlIGFuZCBkZWFkIGNsaWNrIGNvdW50cyBhbmQgbWFwcyB0aGVtIHRvIHJlY29yZGluZ3MuXHJcbiAqIFBPU1Qgd2l0aCBib2R5IHsgcmVjb3JkaW5nczogW3sgaWQsIGRpc3RpbmN0X2lkPywgc3RhcnRfdGltZT8sIGVuZF90aW1lPywgcmVjb3JkaW5nX2R1cmF0aW9uPyB9XSB9XHJcbiAqIHRvIG1hdGNoIGJ5IGRpc3RpbmN0X2lkICsgdGltZXN0YW1wIChyZWxpYWJsZSB3aGVuIHJlY29yZGluZyBpZCAhPT0gJHNlc3Npb25faWQpLlxyXG4gKiBHRVQgd2l0aG91dCBib2R5IHVzZXMgSG9nUUwgYnkgc2Vzc2lvbl9pZCAoYXNzdW1lcyByZWNvcmRpbmcgaWQgPT09ICRzZXNzaW9uX2lkKS5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XHJcbiAgY29uc3QgZW1wdHk6IFJhZ2VEZWFkQ291bnRzID0ge307XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHF1ZXJ5ID0ge1xyXG4gICAgICBxdWVyeToge1xyXG4gICAgICAgIGtpbmQ6IFwiSG9nUUxRdWVyeVwiLFxyXG4gICAgICAgIHF1ZXJ5OiBbXHJcbiAgICAgICAgICBcIlNFTEVDVFwiLFxyXG4gICAgICAgICAgXCIgIHByb3BlcnRpZXMuJHNlc3Npb25faWQgQVMgc2Vzc2lvbl9pZCxcIixcclxuICAgICAgICAgIFwiICBjb3VudElmKGV2ZW50ID0gJyRyYWdlY2xpY2snKSBBUyByYWdlX2NvdW50LFwiLFxyXG4gICAgICAgICAgXCIgIGNvdW50SWYoZXZlbnQgPSAnJGRlYWRfY2xpY2snKSBBUyBkZWFkX2NvdW50XCIsXHJcbiAgICAgICAgICBcIkZST00gZXZlbnRzXCIsXHJcbiAgICAgICAgICBcIldIRVJFIHRpbWVzdGFtcCA+PSBub3coKSAtIElOVEVSVkFMIDcgREFZXCIsXHJcbiAgICAgICAgICBcIiAgQU5EIChldmVudCA9ICckcmFnZWNsaWNrJyBPUiBldmVudCA9ICckZGVhZF9jbGljaycpXCIsXHJcbiAgICAgICAgICBcIiAgQU5EIHByb3BlcnRpZXMuJHNlc3Npb25faWQgSVMgTk9UIE5VTExcIixcclxuICAgICAgICAgIFwiR1JPVVAgQlkgcHJvcGVydGllcy4kc2Vzc2lvbl9pZFwiLFxyXG4gICAgICAgIF0uam9pbihcIlxcblwiKSxcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcG9zdGhvZ1Bvc3QoXCIvcXVlcnkvXCIsIHF1ZXJ5KTtcclxuICAgIHJldHVybiBSZXNwb25zZS5qc29uKHBhcnNlSG9nUUxSZXN1bHRzKGRhdGEpKTtcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiBSZXNwb25zZS5qc29uKGVtcHR5KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgY29uc3QgZW1wdHk6IFJhZ2VEZWFkQ291bnRzID0ge307XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcclxuICAgIGNvbnN0IHJlY29yZGluZ3MgPSBBcnJheS5pc0FycmF5KGJvZHkucmVjb3JkaW5ncykgPyAoYm9keS5yZWNvcmRpbmdzIGFzIFJlY29yZGluZ0lucHV0W10pIDogW107XHJcbiAgICBpZiAocmVjb3JkaW5ncy5sZW5ndGggPT09IDApIHJldHVybiBSZXNwb25zZS5qc29uKGVtcHR5KTtcclxuXHJcbiAgICBjb25zdCBhZnRlciA9IG5ldyBEYXRlKERhdGUubm93KCkgLSA3ICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxOSk7XHJcblxyXG4gICAgY29uc3QgW3JhZ2VSZXMsIGRlYWRSZXNdID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKFtcclxuICAgICAgcG9zdGhvZ0dldDx7IHJlc3VsdHM/OiBBcnJheTx7IGRpc3RpbmN0X2lkPzogc3RyaW5nOyB0aW1lc3RhbXA/OiBzdHJpbmc7IGV2ZW50Pzogc3RyaW5nIH0+IH0+KFwiL2V2ZW50cy9cIiwge1xyXG4gICAgICAgIGV2ZW50OiBcIiRyYWdlY2xpY2tcIixcclxuICAgICAgICBsaW1pdDogXCI1MDBcIixcclxuICAgICAgICBhZnRlcixcclxuICAgICAgfSksXHJcbiAgICAgIHBvc3Rob2dHZXQ8eyByZXN1bHRzPzogQXJyYXk8eyBkaXN0aW5jdF9pZD86IHN0cmluZzsgdGltZXN0YW1wPzogc3RyaW5nOyBldmVudD86IHN0cmluZyB9PiB9PihcIi9ldmVudHMvXCIsIHtcclxuICAgICAgICBldmVudDogXCIkZGVhZF9jbGlja1wiLFxyXG4gICAgICAgIGxpbWl0OiBcIjUwMFwiLFxyXG4gICAgICAgIGFmdGVyLFxyXG4gICAgICB9KSxcclxuICAgIF0pO1xyXG5cclxuICAgIGNvbnN0IHJhZ2VFdmVudHMgPSByYWdlUmVzLnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIiAmJiByYWdlUmVzLnZhbHVlPy5yZXN1bHRzID8gcmFnZVJlcy52YWx1ZS5yZXN1bHRzIDogW107XHJcbiAgICBjb25zdCBkZWFkRXZlbnRzID0gZGVhZFJlcy5zdGF0dXMgPT09IFwiZnVsZmlsbGVkXCIgJiYgZGVhZFJlcy52YWx1ZT8ucmVzdWx0cyA/IGRlYWRSZXMudmFsdWUucmVzdWx0cyA6IFtdO1xyXG5cclxuICAgIGNvbnN0IG91dDogUmFnZURlYWRDb3VudHMgPSB7fTtcclxuICAgIGZvciAoY29uc3QgcmVjIG9mIHJlY29yZGluZ3MpIHtcclxuICAgICAgY29uc3QgZGlkID0gcmVjLmRpc3RpbmN0X2lkID8/IFwiXCI7XHJcbiAgICAgIGxldCBlbmQ6IG51bWJlcjtcclxuICAgICAgaWYgKHJlYy5lbmRfdGltZSkge1xyXG4gICAgICAgIGVuZCA9IG5ldyBEYXRlKHJlYy5lbmRfdGltZSkuZ2V0VGltZSgpO1xyXG4gICAgICB9IGVsc2UgaWYgKHJlYy5zdGFydF90aW1lICE9IG51bGwgJiYgcmVjLnJlY29yZGluZ19kdXJhdGlvbiAhPSBudWxsKSB7XHJcbiAgICAgICAgZW5kID0gbmV3IERhdGUocmVjLnN0YXJ0X3RpbWUpLmdldFRpbWUoKSArIHJlYy5yZWNvcmRpbmdfZHVyYXRpb24gKiAxMDAwO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVuZCA9IERhdGUubm93KCk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3Qgc3RhcnQgPSByZWMuc3RhcnRfdGltZSA/IG5ldyBEYXRlKHJlYy5zdGFydF90aW1lKS5nZXRUaW1lKCkgOiAwO1xyXG5cclxuICAgICAgbGV0IHJhZ2UgPSAwO1xyXG4gICAgICBsZXQgZGVhZCA9IDA7XHJcbiAgICAgIGZvciAoY29uc3QgZSBvZiByYWdlRXZlbnRzKSB7XHJcbiAgICAgICAgaWYgKGUuZGlzdGluY3RfaWQgIT09IGRpZCkgY29udGludWU7XHJcbiAgICAgICAgY29uc3QgdCA9IGUudGltZXN0YW1wID8gbmV3IERhdGUoZS50aW1lc3RhbXApLmdldFRpbWUoKSA6IDA7XHJcbiAgICAgICAgaWYgKHQgPj0gc3RhcnQgJiYgdCA8PSBlbmQpIHJhZ2UrKztcclxuICAgICAgfVxyXG4gICAgICBmb3IgKGNvbnN0IGUgb2YgZGVhZEV2ZW50cykge1xyXG4gICAgICAgIGlmIChlLmRpc3RpbmN0X2lkICE9PSBkaWQpIGNvbnRpbnVlO1xyXG4gICAgICAgIGNvbnN0IHQgPSBlLnRpbWVzdGFtcCA/IG5ldyBEYXRlKGUudGltZXN0YW1wKS5nZXRUaW1lKCkgOiAwO1xyXG4gICAgICAgIGlmICh0ID49IHN0YXJ0ICYmIHQgPD0gZW5kKSBkZWFkKys7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJhZ2UgPiAwIHx8IGRlYWQgPiAwKSBvdXRbcmVjLmlkXSA9IHsgcmFnZUNsaWNrQ291bnQ6IHJhZ2UsIGRlYWRDbGlja0NvdW50OiBkZWFkIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbihvdXQpO1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oZW1wdHkpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsicG9zdGhvZ0dldCIsInBvc3Rob2dQb3N0IiwiZHluYW1pYyIsInBhcnNlSG9nUUxSZXN1bHRzIiwiZGF0YSIsIm91dCIsInJhdyIsInJvd3MiLCJyZXN1bHRzIiwicXVlcnlfc3RhdHVzIiwiQXJyYXkiLCJpc0FycmF5IiwicmVzdWx0IiwiY29sdW1ucyIsInJvdyIsInNpZElkeCIsImluZGV4T2YiLCJyYWdlSWR4IiwiZGVhZElkeCIsInNpZCIsInJhZ2UiLCJOdW1iZXIiLCJkZWFkIiwicmFnZUNsaWNrQ291bnQiLCJkZWFkQ2xpY2tDb3VudCIsInIiLCJzZXNzaW9uX2lkIiwicmFnZV9jb3VudCIsImRlYWRfY291bnQiLCJHRVQiLCJlbXB0eSIsInF1ZXJ5Iiwia2luZCIsImpvaW4iLCJSZXNwb25zZSIsImpzb24iLCJQT1NUIiwicmVxdWVzdCIsImJvZHkiLCJjYXRjaCIsInJlY29yZGluZ3MiLCJsZW5ndGgiLCJhZnRlciIsIkRhdGUiLCJub3ciLCJ0b0lTT1N0cmluZyIsInNsaWNlIiwicmFnZVJlcyIsImRlYWRSZXMiLCJQcm9taXNlIiwiYWxsU2V0dGxlZCIsImV2ZW50IiwibGltaXQiLCJyYWdlRXZlbnRzIiwic3RhdHVzIiwidmFsdWUiLCJkZWFkRXZlbnRzIiwicmVjIiwiZGlkIiwiZGlzdGluY3RfaWQiLCJlbmQiLCJlbmRfdGltZSIsImdldFRpbWUiLCJzdGFydF90aW1lIiwicmVjb3JkaW5nX2R1cmF0aW9uIiwic3RhcnQiLCJlIiwidCIsInRpbWVzdGFtcCIsImlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/posthog/rage-dead-clicks/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/posthog-api.ts":
/*!****************************!*\
  !*** ./lib/posthog-api.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POSTHOG_EMBED_BASE: () => (/* binding */ POSTHOG_EMBED_BASE),\n/* harmony export */   posthogFetch: () => (/* binding */ posthogFetch),\n/* harmony export */   posthogGet: () => (/* binding */ posthogGet),\n/* harmony export */   posthogPatch: () => (/* binding */ posthogPatch),\n/* harmony export */   posthogPost: () => (/* binding */ posthogPost)\n/* harmony export */ });\nconst POSTHOG_BASE = \"https://eu.posthog.com\";\nconst PROJECT_ID = \"123893\";\nfunction getAuthHeaders() {\n    const key = process.env.NEXT_POST_HOG_KEY;\n    if (!key) {\n        throw new Error(\"NEXT_POST_HOG_KEY is not set\");\n    }\n    return {\n        Authorization: `Bearer ${key}`,\n        \"Content-Type\": \"application/json\"\n    };\n}\nasync function posthogFetch(path, options = {}) {\n    const url = `${POSTHOG_BASE}/api/projects/${PROJECT_ID}${path}`;\n    const res = await fetch(url, {\n        ...options,\n        headers: {\n            ...getAuthHeaders(),\n            ...options.headers\n        },\n        cache: \"no-store\"\n    });\n    if (!res.ok) {\n        const text = await res.text();\n        throw new Error(`PostHog API error ${res.status}: ${text}`);\n    }\n    return res.json();\n}\nasync function posthogGet(path, searchParams) {\n    const url = searchParams ? `${POSTHOG_BASE}/api/projects/${PROJECT_ID}${path}?${new URLSearchParams(searchParams)}` : `${POSTHOG_BASE}/api/projects/${PROJECT_ID}${path}`;\n    const res = await fetch(url, {\n        headers: getAuthHeaders(),\n        cache: \"no-store\"\n    });\n    if (!res.ok) {\n        const text = await res.text();\n        throw new Error(`PostHog API error ${res.status}: ${text}`);\n    }\n    return res.json();\n}\nasync function posthogPost(path, body) {\n    const res = await fetch(`${POSTHOG_BASE}/api/projects/${PROJECT_ID}${path}`, {\n        method: \"POST\",\n        headers: getAuthHeaders(),\n        body: JSON.stringify(body),\n        cache: \"no-store\"\n    });\n    if (!res.ok) {\n        const text = await res.text();\n        throw new Error(`PostHog API error ${res.status}: ${text}`);\n    }\n    return res.json();\n}\nasync function posthogPatch(path, body) {\n    const res = await fetch(`${POSTHOG_BASE}/api/projects/${PROJECT_ID}${path}`, {\n        method: \"PATCH\",\n        headers: getAuthHeaders(),\n        body: JSON.stringify(body)\n    });\n    if (!res.ok) {\n        const text = await res.text();\n        throw new Error(`PostHog API error ${res.status}: ${text}`);\n    }\n    return res.json();\n}\n// Use EU embed URL when using eu.posthog.com (app.posthog.com can show \"Page not found\" for EU projects)\nconst POSTHOG_EMBED_BASE = process.env.POSTHOG_EMBED_BASE || \"https://eu.posthog.com/embedded\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0lBQ0EsT0FBT0wsSUFBSU8sSUFBSTtBQUNqQjtBQUVBLHlHQUF5RztBQUNsRyxNQUFNVSxxQkFDWDFCLFFBQVFDLEdBQUcsQ0FBQ3lCLGtCQUFrQixJQUFJLGtDQUFrQyIsInNvdXJjZXMiOlsid2VicGFjazovL2J1Z3Njb3V0LWZyb250ZW5kLy4vbGliL3Bvc3Rob2ctYXBpLnRzPzBmMzAiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUE9TVEhPR19CQVNFID0gXCJodHRwczovL2V1LnBvc3Rob2cuY29tXCI7XHJcbmNvbnN0IFBST0pFQ1RfSUQgPSBcIjEyMzg5M1wiO1xyXG5cclxuZnVuY3Rpb24gZ2V0QXV0aEhlYWRlcnMoKTogSGVhZGVyc0luaXQge1xyXG4gIGNvbnN0IGtleSA9IHByb2Nlc3MuZW52Lk5FWFRfUE9TVF9IT0dfS0VZO1xyXG4gIGlmICgha2V5KSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJORVhUX1BPU1RfSE9HX0tFWSBpcyBub3Qgc2V0XCIpO1xyXG4gIH1cclxuICByZXR1cm4ge1xyXG4gICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2tleX1gLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBvc3Rob2dGZXRjaDxUPihcclxuICBwYXRoOiBzdHJpbmcsXHJcbiAgb3B0aW9uczogUmVxdWVzdEluaXQgPSB7fVxyXG4pOiBQcm9taXNlPFQ+IHtcclxuICBjb25zdCB1cmwgPSBgJHtQT1NUSE9HX0JBU0V9L2FwaS9wcm9qZWN0cy8ke1BST0pFQ1RfSUR9JHtwYXRofWA7XHJcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsLCB7XHJcbiAgICAuLi5vcHRpb25zLFxyXG4gICAgaGVhZGVyczogeyAuLi5nZXRBdXRoSGVhZGVycygpLCAuLi5vcHRpb25zLmhlYWRlcnMgfSxcclxuICAgIGNhY2hlOiBcIm5vLXN0b3JlXCIsXHJcbiAgfSk7XHJcbiAgaWYgKCFyZXMub2spIHtcclxuICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBQb3N0SG9nIEFQSSBlcnJvciAke3Jlcy5zdGF0dXN9OiAke3RleHR9YCk7XHJcbiAgfVxyXG4gIHJldHVybiByZXMuanNvbigpIGFzIFByb21pc2U8VD47XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwb3N0aG9nR2V0PFQ+KHBhdGg6IHN0cmluZywgc2VhcmNoUGFyYW1zPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPik6IFByb21pc2U8VD4ge1xyXG4gIGNvbnN0IHVybCA9IHNlYXJjaFBhcmFtc1xyXG4gICAgPyBgJHtQT1NUSE9HX0JBU0V9L2FwaS9wcm9qZWN0cy8ke1BST0pFQ1RfSUR9JHtwYXRofT8ke25ldyBVUkxTZWFyY2hQYXJhbXMoc2VhcmNoUGFyYW1zKX1gXHJcbiAgICA6IGAke1BPU1RIT0dfQkFTRX0vYXBpL3Byb2plY3RzLyR7UFJPSkVDVF9JRH0ke3BhdGh9YDtcclxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgIGhlYWRlcnM6IGdldEF1dGhIZWFkZXJzKCksXHJcbiAgICBjYWNoZTogXCJuby1zdG9yZVwiLFxyXG4gIH0pO1xyXG4gIGlmICghcmVzLm9rKSB7XHJcbiAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihgUG9zdEhvZyBBUEkgZXJyb3IgJHtyZXMuc3RhdHVzfTogJHt0ZXh0fWApO1xyXG4gIH1cclxuICByZXR1cm4gcmVzLmpzb24oKSBhcyBQcm9taXNlPFQ+O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcG9zdGhvZ1Bvc3Q8VD4ocGF0aDogc3RyaW5nLCBib2R5OiB1bmtub3duKTogUHJvbWlzZTxUPiB7XHJcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7UE9TVEhPR19CQVNFfS9hcGkvcHJvamVjdHMvJHtQUk9KRUNUX0lEfSR7cGF0aH1gLCB7XHJcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgaGVhZGVyczogZ2V0QXV0aEhlYWRlcnMoKSxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxyXG4gICAgY2FjaGU6IFwibm8tc3RvcmVcIixcclxuICB9KTtcclxuICBpZiAoIXJlcy5vaykge1xyXG4gICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFBvc3RIb2cgQVBJIGVycm9yICR7cmVzLnN0YXR1c306ICR7dGV4dH1gKTtcclxuICB9XHJcbiAgcmV0dXJuIHJlcy5qc29uKCkgYXMgUHJvbWlzZTxUPjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBvc3Rob2dQYXRjaDxUPihwYXRoOiBzdHJpbmcsIGJvZHk6IHVua25vd24pOiBQcm9taXNlPFQ+IHtcclxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtQT1NUSE9HX0JBU0V9L2FwaS9wcm9qZWN0cy8ke1BST0pFQ1RfSUR9JHtwYXRofWAsIHtcclxuICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgaGVhZGVyczogZ2V0QXV0aEhlYWRlcnMoKSxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxyXG4gIH0pO1xyXG4gIGlmICghcmVzLm9rKSB7XHJcbiAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihgUG9zdEhvZyBBUEkgZXJyb3IgJHtyZXMuc3RhdHVzfTogJHt0ZXh0fWApO1xyXG4gIH1cclxuICByZXR1cm4gcmVzLmpzb24oKSBhcyBQcm9taXNlPFQ+O1xyXG59XHJcblxyXG4vLyBVc2UgRVUgZW1iZWQgVVJMIHdoZW4gdXNpbmcgZXUucG9zdGhvZy5jb20gKGFwcC5wb3N0aG9nLmNvbSBjYW4gc2hvdyBcIlBhZ2Ugbm90IGZvdW5kXCIgZm9yIEVVIHByb2plY3RzKVxyXG5leHBvcnQgY29uc3QgUE9TVEhPR19FTUJFRF9CQVNFID1cclxuICBwcm9jZXNzLmVudi5QT1NUSE9HX0VNQkVEX0JBU0UgfHwgXCJodHRwczovL2V1LnBvc3Rob2cuY29tL2VtYmVkZGVkXCI7XHJcbiJdLCJuYW1lcyI6WyJQT1NUSE9HX0JBU0UiLCJQUk9KRUNUX0lEIiwiZ2V0QXV0aEhlYWRlcnMiLCJrZXkiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QT1NUX0hPR19LRVkiLCJFcnJvciIsIkF1dGhvcml6YXRpb24iLCJwb3N0aG9nRmV0Y2giLCJwYXRoIiwib3B0aW9ucyIsInVybCIsInJlcyIsImZldGNoIiwiaGVhZGVycyIsImNhY2hlIiwib2siLCJ0ZXh0Iiwic3RhdHVzIiwianNvbiIsInBvc3Rob2dHZXQiLCJzZWFyY2hQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJwb3N0aG9nUG9zdCIsImJvZHkiLCJtZXRob2QiLCJKU09OIiwic3RyaW5naWZ5IiwicG9zdGhvZ1BhdGNoIiwiUE9TVEhPR19FTUJFRF9CQVNFIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/posthog-api.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fposthog%2Frage-dead-clicks%2Froute&page=%2Fapi%2Fposthog%2Frage-dead-clicks%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fposthog%2Frage-dead-clicks%2Froute.ts&appDir=C%3A%5CUsers%5CRISHAY%5CDownloads%5CbugScout%20Frontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRISHAY%5CDownloads%5CbugScout%20Frontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();