/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/db/monitoring/route";
exports.ids = ["app/api/db/monitoring/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/chromadb/dist lazy recursive":
/*!******************************************************************!*\
  !*** ./node_modules/chromadb/dist/ lazy strict namespace object ***!
  \******************************************************************/
/***/ ((module) => {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncaught exception popping up in devtools
	return Promise.resolve().then(() => {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	});
}
webpackEmptyAsyncContext.keys = () => ([]);
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "(rsc)/./node_modules/chromadb/dist lazy recursive";
module.exports = webpackEmptyAsyncContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "sharp":
/*!************************!*\
  !*** external "sharp" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("sharp");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdb%2Fmonitoring%2Froute&page=%2Fapi%2Fdb%2Fmonitoring%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdb%2Fmonitoring%2Froute.ts&appDir=C%3A%5CUsers%5CRISHAY%5CDownloads%5CbugScout%20Frontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRISHAY%5CDownloads%5CbugScout%20Frontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdb%2Fmonitoring%2Froute&page=%2Fapi%2Fdb%2Fmonitoring%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdb%2Fmonitoring%2Froute.ts&appDir=C%3A%5CUsers%5CRISHAY%5CDownloads%5CbugScout%20Frontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRISHAY%5CDownloads%5CbugScout%20Frontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_RISHAY_Downloads_bugScout_Frontend_app_api_db_monitoring_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/db/monitoring/route.ts */ \"(rsc)/./app/api/db/monitoring/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/db/monitoring/route\",\n        pathname: \"/api/db/monitoring\",\n        filename: \"route\",\n        bundlePath: \"app/api/db/monitoring/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\RISHAY\\\\Downloads\\\\bugScout Frontend\\\\app\\\\api\\\\db\\\\monitoring\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_RISHAY_Downloads_bugScout_Frontend_app_api_db_monitoring_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/db/monitoring/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZkYiUyRm1vbml0b3JpbmclMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmRiJTJGbW9uaXRvcmluZyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmRiJTJGbW9uaXRvcmluZyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNSSVNIQVklNUNEb3dubG9hZHMlNUNidWdTY291dCUyMEZyb250ZW5kJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNSSVNIQVklNUNEb3dubG9hZHMlNUNidWdTY291dCUyMEZyb250ZW5kJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNtQztBQUNoSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2J1Z3Njb3V0LWZyb250ZW5kLz9hMjk0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXFJJU0hBWVxcXFxEb3dubG9hZHNcXFxcYnVnU2NvdXQgRnJvbnRlbmRcXFxcYXBwXFxcXGFwaVxcXFxkYlxcXFxtb25pdG9yaW5nXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9kYi9tb25pdG9yaW5nL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZGIvbW9uaXRvcmluZ1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZGIvbW9uaXRvcmluZy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXFJJU0hBWVxcXFxEb3dubG9hZHNcXFxcYnVnU2NvdXQgRnJvbnRlbmRcXFxcYXBwXFxcXGFwaVxcXFxkYlxcXFxtb25pdG9yaW5nXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9kYi9tb25pdG9yaW5nL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdb%2Fmonitoring%2Froute&page=%2Fapi%2Fdb%2Fmonitoring%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdb%2Fmonitoring%2Froute.ts&appDir=C%3A%5CUsers%5CRISHAY%5CDownloads%5CbugScout%20Frontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRISHAY%5CDownloads%5CbugScout%20Frontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/db/monitoring/route.ts":
/*!****************************************!*\
  !*** ./app/api/db/monitoring/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db/index.ts\");\n/* harmony import */ var _lib_db_schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db/schema */ \"(rsc)/./lib/db/schema.ts\");\n/* harmony import */ var _lib_vector_sync_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/vector-sync.service */ \"(rsc)/./lib/vector-sync.service.ts\");\n\n\n\nasync function POST(request) {\n    if (!process.env.DATABASE_URL) {\n        return Response.json({\n            ok: false,\n            message: \"DATABASE_URL not set\"\n        }, {\n            status: 503\n        });\n    }\n    try {\n        const body = await request.json();\n        const list = Array.isArray(body.recordings) ? body.recordings : [];\n        if (list.length === 0) return Response.json({\n            ok: true,\n            inserted: 0\n        });\n        const rows = list.map((r)=>({\n                recordingId: r.id,\n                distinctId: r.distinct_id ?? null,\n                recordingDuration: r.recording_duration ?? null,\n                startTime: r.start_time ? new Date(r.start_time) : null,\n                clickCount: r.click_count ?? null,\n                consoleErrorCount: r.console_error_count ?? null,\n                rageClickCount: r.rage_click_count ?? null,\n                deadClickCount: r.dead_click_count ?? null,\n                startUrl: r.start_url ?? null,\n                payload: r\n            }));\n        await _lib_db__WEBPACK_IMPORTED_MODULE_0__.db.insert(_lib_db_schema__WEBPACK_IMPORTED_MODULE_1__.monitoring).values(rows).onConflictDoNothing({\n            target: _lib_db_schema__WEBPACK_IMPORTED_MODULE_1__.monitoring.recordingId\n        });\n        _lib_vector_sync_service__WEBPACK_IMPORTED_MODULE_2__.VectorSyncService.syncMonitoring(rows).catch(()=>{});\n        return Response.json({\n            ok: true,\n            inserted: rows.length\n        });\n    } catch (e) {\n        console.error(\"POST /api/db/monitoring error:\", e);\n        return Response.json({\n            ok: false\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2RiL21vbml0b3Jpbmcvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUM4QjtBQUNlO0FBQ2lCO0FBZXZELGVBQWVHLEtBQUtDLE9BQW9CO0lBQzdDLElBQUksQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDQyxZQUFZLEVBQUU7UUFDN0IsT0FBT0MsU0FBU0MsSUFBSSxDQUFDO1lBQUVDLElBQUk7WUFBT0MsU0FBUztRQUF1QixHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUNyRjtJQUNBLElBQUk7UUFDRixNQUFNQyxPQUFPLE1BQU1ULFFBQVFLLElBQUk7UUFDL0IsTUFBTUssT0FBT0MsTUFBTUMsT0FBTyxDQUFDSCxLQUFLSSxVQUFVLElBQUtKLEtBQUtJLFVBQVUsR0FBMEIsRUFBRTtRQUMxRixJQUFJSCxLQUFLSSxNQUFNLEtBQUssR0FBRyxPQUFPVixTQUFTQyxJQUFJLENBQUM7WUFBRUMsSUFBSTtZQUFNUyxVQUFVO1FBQUU7UUFFcEUsTUFBTUMsT0FBT04sS0FBS08sR0FBRyxDQUFDLENBQUNDLElBQU87Z0JBQzVCQyxhQUFhRCxFQUFFRSxFQUFFO2dCQUNqQkMsWUFBWUgsRUFBRUksV0FBVyxJQUFJO2dCQUM3QkMsbUJBQW1CTCxFQUFFTSxrQkFBa0IsSUFBSTtnQkFDM0NDLFdBQVdQLEVBQUVRLFVBQVUsR0FBRyxJQUFJQyxLQUFLVCxFQUFFUSxVQUFVLElBQUk7Z0JBQ25ERSxZQUFZVixFQUFFVyxXQUFXLElBQUk7Z0JBQzdCQyxtQkFBbUJaLEVBQUVhLG1CQUFtQixJQUFJO2dCQUM1Q0MsZ0JBQWdCZCxFQUFFZSxnQkFBZ0IsSUFBSTtnQkFDdENDLGdCQUFnQmhCLEVBQUVpQixnQkFBZ0IsSUFBSTtnQkFDdENDLFVBQVVsQixFQUFFbUIsU0FBUyxJQUFJO2dCQUN6QkMsU0FBU3BCO1lBQ1g7UUFFQSxNQUFNdEIsdUNBQUVBLENBQ0wyQyxNQUFNLENBQUMxQyxzREFBVUEsRUFDakIyQyxNQUFNLENBQUN4QixNQUNQeUIsbUJBQW1CLENBQUM7WUFBRUMsUUFBUTdDLHNEQUFVQSxDQUFDc0IsV0FBVztRQUFDO1FBRXhEckIsdUVBQWlCQSxDQUFDNkMsY0FBYyxDQUFDM0IsTUFBTTRCLEtBQUssQ0FBQyxLQUFPO1FBRXBELE9BQU94QyxTQUFTQyxJQUFJLENBQUM7WUFBRUMsSUFBSTtZQUFNUyxVQUFVQyxLQUFLRixNQUFNO1FBQUM7SUFDekQsRUFBRSxPQUFPK0IsR0FBRztRQUNWQyxRQUFRQyxLQUFLLENBQUMsa0NBQWtDRjtRQUNoRCxPQUFPekMsU0FBU0MsSUFBSSxDQUFDO1lBQUVDLElBQUk7UUFBTSxHQUFHO1lBQUVFLFFBQVE7UUFBSTtJQUNwRDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYnVnc2NvdXQtZnJvbnRlbmQvLi9hcHAvYXBpL2RiL21vbml0b3Jpbmcvcm91dGUudHM/YmE3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgZGIgfSBmcm9tIFwiQC9saWIvZGJcIjtcbmltcG9ydCB7IG1vbml0b3JpbmcgfSBmcm9tIFwiQC9saWIvZGIvc2NoZW1hXCI7XG5pbXBvcnQgeyBWZWN0b3JTeW5jU2VydmljZSB9IGZyb20gXCJAL2xpYi92ZWN0b3Itc3luYy5zZXJ2aWNlXCI7XG5cbnR5cGUgUmVjb3JkaW5nUGF5bG9hZCA9IHtcbiAgaWQ6IHN0cmluZztcbiAgZGlzdGluY3RfaWQ/OiBzdHJpbmc7XG4gIHJlY29yZGluZ19kdXJhdGlvbj86IG51bWJlcjtcbiAgc3RhcnRfdGltZT86IHN0cmluZztcbiAgY2xpY2tfY291bnQ/OiBudW1iZXI7XG4gIGNvbnNvbGVfZXJyb3JfY291bnQ/OiBudW1iZXI7XG4gIHJhZ2VfY2xpY2tfY291bnQ/OiBudW1iZXI7XG4gIGRlYWRfY2xpY2tfY291bnQ/OiBudW1iZXI7XG4gIHN0YXJ0X3VybD86IHN0cmluZztcbiAgW2tleTogc3RyaW5nXTogdW5rbm93bjtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIGlmICghcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMKSB7XG4gICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBvazogZmFsc2UsIG1lc3NhZ2U6IFwiREFUQUJBU0VfVVJMIG5vdCBzZXRcIiB9LCB7IHN0YXR1czogNTAzIH0pO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IGxpc3QgPSBBcnJheS5pc0FycmF5KGJvZHkucmVjb3JkaW5ncykgPyAoYm9keS5yZWNvcmRpbmdzIGFzIFJlY29yZGluZ1BheWxvYWRbXSkgOiBbXTtcbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHJldHVybiBSZXNwb25zZS5qc29uKHsgb2s6IHRydWUsIGluc2VydGVkOiAwIH0pO1xuXG4gICAgY29uc3Qgcm93cyA9IGxpc3QubWFwKChyKSA9PiAoe1xuICAgICAgcmVjb3JkaW5nSWQ6IHIuaWQsXG4gICAgICBkaXN0aW5jdElkOiByLmRpc3RpbmN0X2lkID8/IG51bGwsXG4gICAgICByZWNvcmRpbmdEdXJhdGlvbjogci5yZWNvcmRpbmdfZHVyYXRpb24gPz8gbnVsbCxcbiAgICAgIHN0YXJ0VGltZTogci5zdGFydF90aW1lID8gbmV3IERhdGUoci5zdGFydF90aW1lKSA6IG51bGwsXG4gICAgICBjbGlja0NvdW50OiByLmNsaWNrX2NvdW50ID8/IG51bGwsXG4gICAgICBjb25zb2xlRXJyb3JDb3VudDogci5jb25zb2xlX2Vycm9yX2NvdW50ID8/IG51bGwsXG4gICAgICByYWdlQ2xpY2tDb3VudDogci5yYWdlX2NsaWNrX2NvdW50ID8/IG51bGwsXG4gICAgICBkZWFkQ2xpY2tDb3VudDogci5kZWFkX2NsaWNrX2NvdW50ID8/IG51bGwsXG4gICAgICBzdGFydFVybDogci5zdGFydF91cmwgPz8gbnVsbCxcbiAgICAgIHBheWxvYWQ6IHIgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgICB9KSk7XG5cbiAgICBhd2FpdCBkYlxuICAgICAgLmluc2VydChtb25pdG9yaW5nKVxuICAgICAgLnZhbHVlcyhyb3dzKVxuICAgICAgLm9uQ29uZmxpY3REb05vdGhpbmcoeyB0YXJnZXQ6IG1vbml0b3JpbmcucmVjb3JkaW5nSWQgfSk7XG5cbiAgICBWZWN0b3JTeW5jU2VydmljZS5zeW5jTW9uaXRvcmluZyhyb3dzKS5jYXRjaCgoKSA9PiB7fSk7XG5cbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IG9rOiB0cnVlLCBpbnNlcnRlZDogcm93cy5sZW5ndGggfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiUE9TVCAvYXBpL2RiL21vbml0b3JpbmcgZXJyb3I6XCIsIGUpO1xuICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgb2s6IGZhbHNlIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJkYiIsIm1vbml0b3JpbmciLCJWZWN0b3JTeW5jU2VydmljZSIsIlBPU1QiLCJyZXF1ZXN0IiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsIlJlc3BvbnNlIiwianNvbiIsIm9rIiwibWVzc2FnZSIsInN0YXR1cyIsImJvZHkiLCJsaXN0IiwiQXJyYXkiLCJpc0FycmF5IiwicmVjb3JkaW5ncyIsImxlbmd0aCIsImluc2VydGVkIiwicm93cyIsIm1hcCIsInIiLCJyZWNvcmRpbmdJZCIsImlkIiwiZGlzdGluY3RJZCIsImRpc3RpbmN0X2lkIiwicmVjb3JkaW5nRHVyYXRpb24iLCJyZWNvcmRpbmdfZHVyYXRpb24iLCJzdGFydFRpbWUiLCJzdGFydF90aW1lIiwiRGF0ZSIsImNsaWNrQ291bnQiLCJjbGlja19jb3VudCIsImNvbnNvbGVFcnJvckNvdW50IiwiY29uc29sZV9lcnJvcl9jb3VudCIsInJhZ2VDbGlja0NvdW50IiwicmFnZV9jbGlja19jb3VudCIsImRlYWRDbGlja0NvdW50IiwiZGVhZF9jbGlja19jb3VudCIsInN0YXJ0VXJsIiwic3RhcnRfdXJsIiwicGF5bG9hZCIsImluc2VydCIsInZhbHVlcyIsIm9uQ29uZmxpY3REb05vdGhpbmciLCJ0YXJnZXQiLCJzeW5jTW9uaXRvcmluZyIsImNhdGNoIiwiZSIsImNvbnNvbGUiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/db/monitoring/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/chroma.ts":
/*!***********************!*\
  !*** ./lib/chroma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addToChroma: () => (/* binding */ addToChroma)\n/* harmony export */ });\n/* harmony import */ var chromadb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! chromadb */ \"(rsc)/./node_modules/chromadb/dist/chromadb.mjs\");\n/* harmony import */ var _openai_embedding__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./openai-embedding */ \"(rsc)/./lib/openai-embedding.ts\");\n\n\nlet client = null;\nfunction getClient() {\n    if (!process.env.CHROMA_API_KEY) return null;\n    if (client) return client;\n    try {\n        client = new chromadb__WEBPACK_IMPORTED_MODULE_0__.CloudClient({\n            apiKey: process.env.CHROMA_API_KEY,\n            tenant: process.env.CHROMA_TENANT ?? \"38d2507b-966b-47d3-b7a5-dd1385383481\",\n            database: process.env.CHROMA_DATABASE ?? \"bugScoutAI-main\"\n        });\n        return client;\n    } catch  {\n        return null;\n    }\n}\n/** Chroma metadata values must be string, number, or boolean. */ function sanitizeMetadata(meta) {\n    const out = {};\n    for (const [k, v] of Object.entries(meta)){\n        if (v === null || v === undefined) continue;\n        if (typeof v === \"string\" || typeof v === \"number\" || typeof v === \"boolean\") out[k] = v;\n        else out[k] = String(v);\n    }\n    return out;\n}\n/**\n * Add documents to a Chroma collection. No-op if CHROMA_API_KEY is not set or on error.\n * Uses collection name per Neon table: monitoring, issues, logs, posthog_events.\n */ async function addToChroma(collectionName, items) {\n    if (items.length === 0) return;\n    const chroma = getClient();\n    if (!chroma) return;\n    const embeddingFunction = (0,_openai_embedding__WEBPACK_IMPORTED_MODULE_1__.getOpenAIEmbeddingFunction)();\n    if (!embeddingFunction) {\n        console.warn(\"[Chroma] OPENAI_API_KEY not set; skipping sync. Set it in .env.local for Chroma embeddings.\");\n        return;\n    }\n    try {\n        const collection = await chroma.getOrCreateCollection({\n            name: collectionName,\n            embeddingFunction\n        });\n        const ids = items.map((i)=>i.id);\n        const documents = items.map((i)=>i.document);\n        const metadatas = items.map((i)=>sanitizeMetadata({\n                ...i.metadata,\n                source: \"bugscout\"\n            }));\n        await collection.add({\n            ids,\n            documents,\n            metadatas\n        });\n    } catch (e) {\n        console.error(`[Chroma] addToChroma(${collectionName}) error:`, e);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY2hyb21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1QztBQUN5QjtBQUVoRSxJQUFJRSxTQUE2QjtBQUVqQyxTQUFTQztJQUNQLElBQUksQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDQyxjQUFjLEVBQUUsT0FBTztJQUN4QyxJQUFJSixRQUFRLE9BQU9BO0lBQ25CLElBQUk7UUFDRkEsU0FBUyxJQUFJRixpREFBV0EsQ0FBQztZQUN2Qk8sUUFBUUgsUUFBUUMsR0FBRyxDQUFDQyxjQUFjO1lBQ2xDRSxRQUFRSixRQUFRQyxHQUFHLENBQUNJLGFBQWEsSUFBSTtZQUNyQ0MsVUFBVU4sUUFBUUMsR0FBRyxDQUFDTSxlQUFlLElBQUk7UUFDM0M7UUFDQSxPQUFPVDtJQUNULEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGO0FBRUEsK0RBQStELEdBQy9ELFNBQVNVLGlCQUFpQkMsSUFBNkI7SUFDckQsTUFBTUMsTUFBaUQsQ0FBQztJQUN4RCxLQUFLLE1BQU0sQ0FBQ0MsR0FBR0MsRUFBRSxJQUFJQyxPQUFPQyxPQUFPLENBQUNMLE1BQU87UUFDekMsSUFBSUcsTUFBTSxRQUFRQSxNQUFNRyxXQUFXO1FBQ25DLElBQUksT0FBT0gsTUFBTSxZQUFZLE9BQU9BLE1BQU0sWUFBWSxPQUFPQSxNQUFNLFdBQVdGLEdBQUcsQ0FBQ0MsRUFBRSxHQUFHQzthQUNsRkYsR0FBRyxDQUFDQyxFQUFFLEdBQUdLLE9BQU9KO0lBQ3ZCO0lBQ0EsT0FBT0Y7QUFDVDtBQVFBOzs7Q0FHQyxHQUNNLGVBQWVPLFlBQ3BCQyxjQUFzQixFQUN0QkMsS0FBa0I7SUFFbEIsSUFBSUEsTUFBTUMsTUFBTSxLQUFLLEdBQUc7SUFDeEIsTUFBTUMsU0FBU3RCO0lBQ2YsSUFBSSxDQUFDc0IsUUFBUTtJQUNiLE1BQU1DLG9CQUFvQnpCLDZFQUEwQkE7SUFDcEQsSUFBSSxDQUFDeUIsbUJBQW1CO1FBQ3RCQyxRQUFRQyxJQUFJLENBQ1Y7UUFFRjtJQUNGO0lBQ0EsSUFBSTtRQUNGLE1BQU1DLGFBQWEsTUFBTUosT0FBT0sscUJBQXFCLENBQUM7WUFDcERDLE1BQU1UO1lBQ05JO1FBQ0Y7UUFDQSxNQUFNTSxNQUFNVCxNQUFNVSxHQUFHLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRUMsRUFBRTtRQUNqQyxNQUFNQyxZQUFZYixNQUFNVSxHQUFHLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRUcsUUFBUTtRQUM3QyxNQUFNQyxZQUFZZixNQUFNVSxHQUFHLENBQUMsQ0FBQ0MsSUFBTXRCLGlCQUFpQjtnQkFBRSxHQUFHc0IsRUFBRUssUUFBUTtnQkFBRUMsUUFBUTtZQUFXO1FBQ3hGLE1BQU1YLFdBQVdZLEdBQUcsQ0FBQztZQUFFVDtZQUFLSTtZQUFXRTtRQUFVO0lBQ25ELEVBQUUsT0FBT0ksR0FBRztRQUNWZixRQUFRZ0IsS0FBSyxDQUFDLENBQUMscUJBQXFCLEVBQUVyQixlQUFlLFFBQVEsQ0FBQyxFQUFFb0I7SUFDbEU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2J1Z3Njb3V0LWZyb250ZW5kLy4vbGliL2Nocm9tYS50cz9kNjZiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENsb3VkQ2xpZW50IH0gZnJvbSBcImNocm9tYWRiXCI7XG5pbXBvcnQgeyBnZXRPcGVuQUlFbWJlZGRpbmdGdW5jdGlvbiB9IGZyb20gXCIuL29wZW5haS1lbWJlZGRpbmdcIjtcblxubGV0IGNsaWVudDogQ2xvdWRDbGllbnQgfCBudWxsID0gbnVsbDtcblxuZnVuY3Rpb24gZ2V0Q2xpZW50KCk6IENsb3VkQ2xpZW50IHwgbnVsbCB7XG4gIGlmICghcHJvY2Vzcy5lbnYuQ0hST01BX0FQSV9LRVkpIHJldHVybiBudWxsO1xuICBpZiAoY2xpZW50KSByZXR1cm4gY2xpZW50O1xuICB0cnkge1xuICAgIGNsaWVudCA9IG5ldyBDbG91ZENsaWVudCh7XG4gICAgICBhcGlLZXk6IHByb2Nlc3MuZW52LkNIUk9NQV9BUElfS0VZLFxuICAgICAgdGVuYW50OiBwcm9jZXNzLmVudi5DSFJPTUFfVEVOQU5UID8/IFwiMzhkMjUwN2ItOTY2Yi00N2QzLWI3YTUtZGQxMzg1MzgzNDgxXCIsXG4gICAgICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuQ0hST01BX0RBVEFCQVNFID8/IFwiYnVnU2NvdXRBSS1tYWluXCIsXG4gICAgfSk7XG4gICAgcmV0dXJuIGNsaWVudDtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqIENocm9tYSBtZXRhZGF0YSB2YWx1ZXMgbXVzdCBiZSBzdHJpbmcsIG51bWJlciwgb3IgYm9vbGVhbi4gKi9cbmZ1bmN0aW9uIHNhbml0aXplTWV0YWRhdGEobWV0YTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuPiB7XG4gIGNvbnN0IG91dDogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbj4gPSB7fTtcbiAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMobWV0YSkpIHtcbiAgICBpZiAodiA9PT0gbnVsbCB8fCB2ID09PSB1bmRlZmluZWQpIGNvbnRpbnVlO1xuICAgIGlmICh0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgdiA9PT0gXCJib29sZWFuXCIpIG91dFtrXSA9IHY7XG4gICAgZWxzZSBvdXRba10gPSBTdHJpbmcodik7XG4gIH1cbiAgcmV0dXJuIG91dDtcbn1cblxuZXhwb3J0IHR5cGUgQ2hyb21hRG9jID0ge1xuICBpZDogc3RyaW5nO1xuICBkb2N1bWVudDogc3RyaW5nO1xuICBtZXRhZGF0YTogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG59O1xuXG4vKipcbiAqIEFkZCBkb2N1bWVudHMgdG8gYSBDaHJvbWEgY29sbGVjdGlvbi4gTm8tb3AgaWYgQ0hST01BX0FQSV9LRVkgaXMgbm90IHNldCBvciBvbiBlcnJvci5cbiAqIFVzZXMgY29sbGVjdGlvbiBuYW1lIHBlciBOZW9uIHRhYmxlOiBtb25pdG9yaW5nLCBpc3N1ZXMsIGxvZ3MsIHBvc3Rob2dfZXZlbnRzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkVG9DaHJvbWEoXG4gIGNvbGxlY3Rpb25OYW1lOiBzdHJpbmcsXG4gIGl0ZW1zOiBDaHJvbWFEb2NbXVxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmIChpdGVtcy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgY29uc3QgY2hyb21hID0gZ2V0Q2xpZW50KCk7XG4gIGlmICghY2hyb21hKSByZXR1cm47XG4gIGNvbnN0IGVtYmVkZGluZ0Z1bmN0aW9uID0gZ2V0T3BlbkFJRW1iZWRkaW5nRnVuY3Rpb24oKTtcbiAgaWYgKCFlbWJlZGRpbmdGdW5jdGlvbikge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiW0Nocm9tYV0gT1BFTkFJX0FQSV9LRVkgbm90IHNldDsgc2tpcHBpbmcgc3luYy4gU2V0IGl0IGluIC5lbnYubG9jYWwgZm9yIENocm9tYSBlbWJlZGRpbmdzLlwiXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gYXdhaXQgY2hyb21hLmdldE9yQ3JlYXRlQ29sbGVjdGlvbih7XG4gICAgICBuYW1lOiBjb2xsZWN0aW9uTmFtZSxcbiAgICAgIGVtYmVkZGluZ0Z1bmN0aW9uLFxuICAgIH0pO1xuICAgIGNvbnN0IGlkcyA9IGl0ZW1zLm1hcCgoaSkgPT4gaS5pZCk7XG4gICAgY29uc3QgZG9jdW1lbnRzID0gaXRlbXMubWFwKChpKSA9PiBpLmRvY3VtZW50KTtcbiAgICBjb25zdCBtZXRhZGF0YXMgPSBpdGVtcy5tYXAoKGkpID0+IHNhbml0aXplTWV0YWRhdGEoeyAuLi5pLm1ldGFkYXRhLCBzb3VyY2U6IFwiYnVnc2NvdXRcIiB9KSk7XG4gICAgYXdhaXQgY29sbGVjdGlvbi5hZGQoeyBpZHMsIGRvY3VtZW50cywgbWV0YWRhdGFzIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihgW0Nocm9tYV0gYWRkVG9DaHJvbWEoJHtjb2xsZWN0aW9uTmFtZX0pIGVycm9yOmAsIGUpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2xvdWRDbGllbnQiLCJnZXRPcGVuQUlFbWJlZGRpbmdGdW5jdGlvbiIsImNsaWVudCIsImdldENsaWVudCIsInByb2Nlc3MiLCJlbnYiLCJDSFJPTUFfQVBJX0tFWSIsImFwaUtleSIsInRlbmFudCIsIkNIUk9NQV9URU5BTlQiLCJkYXRhYmFzZSIsIkNIUk9NQV9EQVRBQkFTRSIsInNhbml0aXplTWV0YWRhdGEiLCJtZXRhIiwib3V0IiwiayIsInYiLCJPYmplY3QiLCJlbnRyaWVzIiwidW5kZWZpbmVkIiwiU3RyaW5nIiwiYWRkVG9DaHJvbWEiLCJjb2xsZWN0aW9uTmFtZSIsIml0ZW1zIiwibGVuZ3RoIiwiY2hyb21hIiwiZW1iZWRkaW5nRnVuY3Rpb24iLCJjb25zb2xlIiwid2FybiIsImNvbGxlY3Rpb24iLCJnZXRPckNyZWF0ZUNvbGxlY3Rpb24iLCJuYW1lIiwiaWRzIiwibWFwIiwiaSIsImlkIiwiZG9jdW1lbnRzIiwiZG9jdW1lbnQiLCJtZXRhZGF0YXMiLCJtZXRhZGF0YSIsInNvdXJjZSIsImFkZCIsImUiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/chroma.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db/index.ts":
/*!*************************!*\
  !*** ./lib/db/index.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   issueRevisions: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.issueRevisions),\n/* harmony export */   issues: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.issues),\n/* harmony export */   logs: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.logs),\n/* harmony export */   monitoring: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.monitoring),\n/* harmony export */   posthogEvents: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.posthogEvents)\n/* harmony export */ });\n/* harmony import */ var _neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @neondatabase/serverless */ \"(rsc)/./node_modules/@neondatabase/serverless/index.mjs\");\n/* harmony import */ var drizzle_orm_neon_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm/neon-http */ \"(rsc)/./node_modules/drizzle-orm/neon-http/driver.js\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./schema */ \"(rsc)/./lib/db/schema.ts\");\n\n\n\nconst sql = (0,_neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__.neon)(process.env.DATABASE_URL);\nconst db = (0,drizzle_orm_neon_http__WEBPACK_IMPORTED_MODULE_2__.drizzle)(sql, {\n    schema: _schema__WEBPACK_IMPORTED_MODULE_1__\n});\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQWdEO0FBQ0E7QUFDYjtBQUVuQyxNQUFNRyxNQUFNSCw4REFBSUEsQ0FBQ0ksUUFBUUMsR0FBRyxDQUFDQyxZQUFZO0FBQ2xDLE1BQU1DLEtBQUtOLDhEQUFPQSxDQUFDRSxLQUFLO0lBQUVELE1BQU1BLHNDQUFBQTtBQUFDLEdBQUc7QUFFbEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9idWdzY291dC1mcm9udGVuZC8uL2xpYi9kYi9pbmRleC50cz82Zjk0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG5lb24gfSBmcm9tIFwiQG5lb25kYXRhYmFzZS9zZXJ2ZXJsZXNzXCI7XG5pbXBvcnQgeyBkcml6emxlIH0gZnJvbSBcImRyaXp6bGUtb3JtL25lb24taHR0cFwiO1xuaW1wb3J0ICogYXMgc2NoZW1hIGZyb20gXCIuL3NjaGVtYVwiO1xuXG5jb25zdCBzcWwgPSBuZW9uKHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCEpO1xuZXhwb3J0IGNvbnN0IGRiID0gZHJpenpsZShzcWwsIHsgc2NoZW1hIH0pO1xuXG5leHBvcnQgKiBmcm9tIFwiLi9zY2hlbWFcIjtcbiJdLCJuYW1lcyI6WyJuZW9uIiwiZHJpenpsZSIsInNjaGVtYSIsInNxbCIsInByb2Nlc3MiLCJlbnYiLCJEQVRBQkFTRV9VUkwiLCJkYiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db/index.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db/schema.ts":
/*!**************************!*\
  !*** ./lib/db/schema.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   issueRevisions: () => (/* binding */ issueRevisions),\n/* harmony export */   issues: () => (/* binding */ issues),\n/* harmony export */   logs: () => (/* binding */ logs),\n/* harmony export */   monitoring: () => (/* binding */ monitoring),\n/* harmony export */   posthogEvents: () => (/* binding */ posthogEvents)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/table.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/uuid.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/text.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/integer.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/timestamp.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/jsonb.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/indexes.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/boolean.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/numeric.js\");\n\n/**\n * PostHog session/recording data. Only new records inserted (recording_id unique).\n */ const monitoring = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"monitoring\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.uuid)(\"id\").primaryKey().defaultRandom(),\n    recordingId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"recording_id\").notNull(),\n    distinctId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"distinct_id\"),\n    recordingDuration: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.integer)(\"recording_duration\"),\n    startTime: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"start_time\", {\n        withTimezone: true\n    }),\n    clickCount: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.integer)(\"click_count\"),\n    consoleErrorCount: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.integer)(\"console_error_count\"),\n    rageClickCount: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.integer)(\"rage_click_count\"),\n    deadClickCount: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.integer)(\"dead_click_count\"),\n    startUrl: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"start_url\"),\n    payload: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.jsonb)(\"payload\"),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\", {\n        withTimezone: true\n    }).defaultNow().notNull()\n}, (t)=>[\n        (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.uniqueIndex)(\"monitoring_recording_id_idx\").on(t.recordingId)\n    ]);\n/**\n * Issues from Issue Monitoring Agent + resolution/approval state.\n * One row per recording (upsert by recording_id).\n */ const issues = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"issues\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.uuid)(\"id\").primaryKey().defaultRandom(),\n    recordingId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"recording_id\").notNull().unique(),\n    posthogCategoryId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"posthog_category_id\").notNull(),\n    posthogIssueTypeId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"posthog_issue_type_id\").notNull(),\n    title: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"title\").notNull(),\n    description: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"description\").notNull(),\n    severity: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"severity\").notNull(),\n    codeLocation: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"code_location\").notNull(),\n    codeSnippetHint: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"code_snippet_hint\"),\n    startUrl: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"start_url\"),\n    suggestedFix: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"suggested_fix\"),\n    status: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"status\").notNull().default(\"Unresolved\"),\n    approved: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.boolean)(\"approved\").notNull().default(false),\n    approvedRating: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.integer)(\"approved_rating\"),\n    approvedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"approved_at\", {\n        withTimezone: true\n    }),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\", {\n        withTimezone: true\n    }).defaultNow().notNull(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"updated_at\", {\n        withTimezone: true\n    }).defaultNow().notNull()\n});\n/**\n * Revision instructions and resulting fix (multiple per issue).\n */ const issueRevisions = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"issue_revisions\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.uuid)(\"id\").primaryKey().defaultRandom(),\n    issueId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.uuid)(\"issue_id\").notNull().references(()=>issues.id, {\n        onDelete: \"cascade\"\n    }),\n    instruction: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"instruction\").notNull(),\n    suggestedFixAfter: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"suggested_fix_after\"),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\", {\n        withTimezone: true\n    }).defaultNow().notNull()\n});\n/**\n * Logs for agent context: approved fixes + optional confidence.\n * When the same/similar issue appears, agent can query logs to suggest from past solutions.\n */ const logs = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"logs\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.uuid)(\"id\").primaryKey().defaultRandom(),\n    issueId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.uuid)(\"issue_id\").references(()=>issues.id),\n    recordingId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"recording_id\").notNull(),\n    title: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"title\").notNull(),\n    description: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"description\").notNull(),\n    severity: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"severity\").notNull(),\n    suggestedFix: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"suggested_fix\").notNull(),\n    developerRating: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.integer)(\"developer_rating\"),\n    agentConfidenceScore: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_8__.decimal)(\"agent_confidence_score\", {\n        precision: 3,\n        scale: 2\n    }),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\", {\n        withTimezone: true\n    }).defaultNow().notNull()\n});\n/**\n * PostHog event-level data (pageviews, autocapture, pageleave, web_vitals, etc.).\n * Stores all event details not already covered by monitoring (session/recording summary).\n * One row per event; deduplicated by posthog_event_id.\n */ const posthogEvents = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"posthog_events\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.uuid)(\"id\").primaryKey().defaultRandom(),\n    posthogEventId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"posthog_event_id\").notNull(),\n    eventName: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"event_name\").notNull(),\n    distinctId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"distinct_id\"),\n    timestamp: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"timestamp\", {\n        withTimezone: true\n    }).notNull(),\n    url: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"url\"),\n    elementTag: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"element_tag\"),\n    elementText: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"element_text\"),\n    sessionId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"session_id\"),\n    properties: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.jsonb)(\"properties\"),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\", {\n        withTimezone: true\n    }).defaultNow().notNull()\n}, (t)=>[\n        (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.uniqueIndex)(\"posthog_events_posthog_event_id_idx\").on(t.posthogEventId)\n    ]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ckIsOERBQVNBLENBQUMsY0FBYztRQUFFYyxjQUFjO0lBQUssR0FBR1EsVUFBVSxHQUFHWixPQUFPO0FBQ2pGLEdBQ0EsQ0FBQ2EsSUFBTTtRQUFDbkIsZ0VBQVdBLENBQUMsdUNBQXVDb0IsRUFBRSxDQUFDRCxFQUFFOEIsY0FBYztLQUFFLEVBQ2hGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYnVnc2NvdXQtZnJvbnRlbmQvLi9saWIvZGIvc2NoZW1hLnRzPzJmNmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgcGdUYWJsZSxcbiAgdGV4dCxcbiAgaW50ZWdlcixcbiAgYm9vbGVhbixcbiAgdGltZXN0YW1wLFxuICB1dWlkLFxuICBkZWNpbWFsLFxuICBqc29uYixcbiAgdW5pcXVlSW5kZXgsXG59IGZyb20gXCJkcml6emxlLW9ybS9wZy1jb3JlXCI7XG5cbi8qKlxuICogUG9zdEhvZyBzZXNzaW9uL3JlY29yZGluZyBkYXRhLiBPbmx5IG5ldyByZWNvcmRzIGluc2VydGVkIChyZWNvcmRpbmdfaWQgdW5pcXVlKS5cbiAqL1xuZXhwb3J0IGNvbnN0IG1vbml0b3JpbmcgPSBwZ1RhYmxlKFxuICBcIm1vbml0b3JpbmdcIixcbiAge1xuICAgIGlkOiB1dWlkKFwiaWRcIikucHJpbWFyeUtleSgpLmRlZmF1bHRSYW5kb20oKSxcbiAgICByZWNvcmRpbmdJZDogdGV4dChcInJlY29yZGluZ19pZFwiKS5ub3ROdWxsKCksXG4gICAgZGlzdGluY3RJZDogdGV4dChcImRpc3RpbmN0X2lkXCIpLFxuICAgIHJlY29yZGluZ0R1cmF0aW9uOiBpbnRlZ2VyKFwicmVjb3JkaW5nX2R1cmF0aW9uXCIpLFxuICAgIHN0YXJ0VGltZTogdGltZXN0YW1wKFwic3RhcnRfdGltZVwiLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KSxcbiAgICBjbGlja0NvdW50OiBpbnRlZ2VyKFwiY2xpY2tfY291bnRcIiksXG4gICAgY29uc29sZUVycm9yQ291bnQ6IGludGVnZXIoXCJjb25zb2xlX2Vycm9yX2NvdW50XCIpLFxuICAgIHJhZ2VDbGlja0NvdW50OiBpbnRlZ2VyKFwicmFnZV9jbGlja19jb3VudFwiKSxcbiAgICBkZWFkQ2xpY2tDb3VudDogaW50ZWdlcihcImRlYWRfY2xpY2tfY291bnRcIiksXG4gICAgc3RhcnRVcmw6IHRleHQoXCJzdGFydF91cmxcIiksXG4gICAgcGF5bG9hZDoganNvbmIoXCJwYXlsb2FkXCIpLFxuICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wKFwiY3JlYXRlZF9hdFwiLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KS5kZWZhdWx0Tm93KCkubm90TnVsbCgpLFxuICB9LFxuICAodCkgPT4gW3VuaXF1ZUluZGV4KFwibW9uaXRvcmluZ19yZWNvcmRpbmdfaWRfaWR4XCIpLm9uKHQucmVjb3JkaW5nSWQpXVxuKTtcblxuLyoqXG4gKiBJc3N1ZXMgZnJvbSBJc3N1ZSBNb25pdG9yaW5nIEFnZW50ICsgcmVzb2x1dGlvbi9hcHByb3ZhbCBzdGF0ZS5cbiAqIE9uZSByb3cgcGVyIHJlY29yZGluZyAodXBzZXJ0IGJ5IHJlY29yZGluZ19pZCkuXG4gKi9cbmV4cG9ydCBjb25zdCBpc3N1ZXMgPSBwZ1RhYmxlKFwiaXNzdWVzXCIsIHtcbiAgaWQ6IHV1aWQoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdFJhbmRvbSgpLFxuICByZWNvcmRpbmdJZDogdGV4dChcInJlY29yZGluZ19pZFwiKS5ub3ROdWxsKCkudW5pcXVlKCksXG4gIHBvc3Rob2dDYXRlZ29yeUlkOiB0ZXh0KFwicG9zdGhvZ19jYXRlZ29yeV9pZFwiKS5ub3ROdWxsKCksXG4gIHBvc3Rob2dJc3N1ZVR5cGVJZDogdGV4dChcInBvc3Rob2dfaXNzdWVfdHlwZV9pZFwiKS5ub3ROdWxsKCksXG4gIHRpdGxlOiB0ZXh0KFwidGl0bGVcIikubm90TnVsbCgpLFxuICBkZXNjcmlwdGlvbjogdGV4dChcImRlc2NyaXB0aW9uXCIpLm5vdE51bGwoKSxcbiAgc2V2ZXJpdHk6IHRleHQoXCJzZXZlcml0eVwiKS5ub3ROdWxsKCksIC8vIENyaXRpY2FsIHwgSGlnaCB8IE1lZGl1bSB8IExvd1xuICBjb2RlTG9jYXRpb246IHRleHQoXCJjb2RlX2xvY2F0aW9uXCIpLm5vdE51bGwoKSxcbiAgY29kZVNuaXBwZXRIaW50OiB0ZXh0KFwiY29kZV9zbmlwcGV0X2hpbnRcIiksXG4gIHN0YXJ0VXJsOiB0ZXh0KFwic3RhcnRfdXJsXCIpLFxuICBzdWdnZXN0ZWRGaXg6IHRleHQoXCJzdWdnZXN0ZWRfZml4XCIpLFxuICBzdGF0dXM6IHRleHQoXCJzdGF0dXNcIikubm90TnVsbCgpLmRlZmF1bHQoXCJVbnJlc29sdmVkXCIpLCAvLyBVbnJlc29sdmVkIHwgUmVzb2x2ZWRcbiAgYXBwcm92ZWQ6IGJvb2xlYW4oXCJhcHByb3ZlZFwiKS5ub3ROdWxsKCkuZGVmYXVsdChmYWxzZSksXG4gIGFwcHJvdmVkUmF0aW5nOiBpbnRlZ2VyKFwiYXBwcm92ZWRfcmF0aW5nXCIpLCAvLyAxLTUgd2hlbiBhcHByb3ZlZFxuICBhcHByb3ZlZEF0OiB0aW1lc3RhbXAoXCJhcHByb3ZlZF9hdFwiLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KSxcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoXCJjcmVhdGVkX2F0XCIsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pLmRlZmF1bHROb3coKS5ub3ROdWxsKCksXG4gIHVwZGF0ZWRBdDogdGltZXN0YW1wKFwidXBkYXRlZF9hdFwiLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KS5kZWZhdWx0Tm93KCkubm90TnVsbCgpLFxufSk7XG5cbi8qKlxuICogUmV2aXNpb24gaW5zdHJ1Y3Rpb25zIGFuZCByZXN1bHRpbmcgZml4IChtdWx0aXBsZSBwZXIgaXNzdWUpLlxuICovXG5leHBvcnQgY29uc3QgaXNzdWVSZXZpc2lvbnMgPSBwZ1RhYmxlKFwiaXNzdWVfcmV2aXNpb25zXCIsIHtcbiAgaWQ6IHV1aWQoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdFJhbmRvbSgpLFxuICBpc3N1ZUlkOiB1dWlkKFwiaXNzdWVfaWRcIilcbiAgICAubm90TnVsbCgpXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gaXNzdWVzLmlkLCB7IG9uRGVsZXRlOiBcImNhc2NhZGVcIiB9KSxcbiAgaW5zdHJ1Y3Rpb246IHRleHQoXCJpbnN0cnVjdGlvblwiKS5ub3ROdWxsKCksXG4gIHN1Z2dlc3RlZEZpeEFmdGVyOiB0ZXh0KFwic3VnZ2VzdGVkX2ZpeF9hZnRlclwiKSxcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoXCJjcmVhdGVkX2F0XCIsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pLmRlZmF1bHROb3coKS5ub3ROdWxsKCksXG59KTtcblxuLyoqXG4gKiBMb2dzIGZvciBhZ2VudCBjb250ZXh0OiBhcHByb3ZlZCBmaXhlcyArIG9wdGlvbmFsIGNvbmZpZGVuY2UuXG4gKiBXaGVuIHRoZSBzYW1lL3NpbWlsYXIgaXNzdWUgYXBwZWFycywgYWdlbnQgY2FuIHF1ZXJ5IGxvZ3MgdG8gc3VnZ2VzdCBmcm9tIHBhc3Qgc29sdXRpb25zLlxuICovXG5leHBvcnQgY29uc3QgbG9ncyA9IHBnVGFibGUoXCJsb2dzXCIsIHtcbiAgaWQ6IHV1aWQoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdFJhbmRvbSgpLFxuICBpc3N1ZUlkOiB1dWlkKFwiaXNzdWVfaWRcIikucmVmZXJlbmNlcygoKSA9PiBpc3N1ZXMuaWQpLFxuICByZWNvcmRpbmdJZDogdGV4dChcInJlY29yZGluZ19pZFwiKS5ub3ROdWxsKCksXG4gIHRpdGxlOiB0ZXh0KFwidGl0bGVcIikubm90TnVsbCgpLFxuICBkZXNjcmlwdGlvbjogdGV4dChcImRlc2NyaXB0aW9uXCIpLm5vdE51bGwoKSxcbiAgc2V2ZXJpdHk6IHRleHQoXCJzZXZlcml0eVwiKS5ub3ROdWxsKCksXG4gIHN1Z2dlc3RlZEZpeDogdGV4dChcInN1Z2dlc3RlZF9maXhcIikubm90TnVsbCgpLFxuICBkZXZlbG9wZXJSYXRpbmc6IGludGVnZXIoXCJkZXZlbG9wZXJfcmF0aW5nXCIpLCAvLyAxLTUgd2hlbiBhcHByb3ZlZFxuICBhZ2VudENvbmZpZGVuY2VTY29yZTogZGVjaW1hbChcImFnZW50X2NvbmZpZGVuY2Vfc2NvcmVcIiwgeyBwcmVjaXNpb246IDMsIHNjYWxlOiAyIH0pLCAvLyAwLjAwLTEuMDAgd2hlbiBhZ2VudCB1c2VkIHRoaXMgbG9nXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKFwiY3JlYXRlZF9hdFwiLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KS5kZWZhdWx0Tm93KCkubm90TnVsbCgpLFxufSk7XG5cbmV4cG9ydCB0eXBlIE1vbml0b3JpbmdSb3cgPSB0eXBlb2YgbW9uaXRvcmluZy4kaW5mZXJTZWxlY3Q7XG5leHBvcnQgdHlwZSBNb25pdG9yaW5nSW5zZXJ0ID0gdHlwZW9mIG1vbml0b3JpbmcuJGluZmVySW5zZXJ0O1xuZXhwb3J0IHR5cGUgSXNzdWVSb3cgPSB0eXBlb2YgaXNzdWVzLiRpbmZlclNlbGVjdDtcbmV4cG9ydCB0eXBlIElzc3VlSW5zZXJ0ID0gdHlwZW9mIGlzc3Vlcy4kaW5mZXJJbnNlcnQ7XG5leHBvcnQgdHlwZSBJc3N1ZVJldmlzaW9uUm93ID0gdHlwZW9mIGlzc3VlUmV2aXNpb25zLiRpbmZlclNlbGVjdDtcbmV4cG9ydCB0eXBlIElzc3VlUmV2aXNpb25JbnNlcnQgPSB0eXBlb2YgaXNzdWVSZXZpc2lvbnMuJGluZmVySW5zZXJ0O1xuLyoqXG4gKiBQb3N0SG9nIGV2ZW50LWxldmVsIGRhdGEgKHBhZ2V2aWV3cywgYXV0b2NhcHR1cmUsIHBhZ2VsZWF2ZSwgd2ViX3ZpdGFscywgZXRjLikuXG4gKiBTdG9yZXMgYWxsIGV2ZW50IGRldGFpbHMgbm90IGFscmVhZHkgY292ZXJlZCBieSBtb25pdG9yaW5nIChzZXNzaW9uL3JlY29yZGluZyBzdW1tYXJ5KS5cbiAqIE9uZSByb3cgcGVyIGV2ZW50OyBkZWR1cGxpY2F0ZWQgYnkgcG9zdGhvZ19ldmVudF9pZC5cbiAqL1xuZXhwb3J0IGNvbnN0IHBvc3Rob2dFdmVudHMgPSBwZ1RhYmxlKFxuICBcInBvc3Rob2dfZXZlbnRzXCIsXG4gIHtcbiAgICBpZDogdXVpZChcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0UmFuZG9tKCksXG4gICAgcG9zdGhvZ0V2ZW50SWQ6IHRleHQoXCJwb3N0aG9nX2V2ZW50X2lkXCIpLm5vdE51bGwoKSxcbiAgICBldmVudE5hbWU6IHRleHQoXCJldmVudF9uYW1lXCIpLm5vdE51bGwoKSxcbiAgICBkaXN0aW5jdElkOiB0ZXh0KFwiZGlzdGluY3RfaWRcIiksXG4gICAgdGltZXN0YW1wOiB0aW1lc3RhbXAoXCJ0aW1lc3RhbXBcIiwgeyB3aXRoVGltZXpvbmU6IHRydWUgfSkubm90TnVsbCgpLFxuICAgIHVybDogdGV4dChcInVybFwiKSxcbiAgICBlbGVtZW50VGFnOiB0ZXh0KFwiZWxlbWVudF90YWdcIiksXG4gICAgZWxlbWVudFRleHQ6IHRleHQoXCJlbGVtZW50X3RleHRcIiksXG4gICAgc2Vzc2lvbklkOiB0ZXh0KFwic2Vzc2lvbl9pZFwiKSxcbiAgICBwcm9wZXJ0aWVzOiBqc29uYihcInByb3BlcnRpZXNcIiksXG4gICAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoXCJjcmVhdGVkX2F0XCIsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pLmRlZmF1bHROb3coKS5ub3ROdWxsKCksXG4gIH0sXG4gICh0KSA9PiBbdW5pcXVlSW5kZXgoXCJwb3N0aG9nX2V2ZW50c19wb3N0aG9nX2V2ZW50X2lkX2lkeFwiKS5vbih0LnBvc3Rob2dFdmVudElkKV1cbik7XG5cbmV4cG9ydCB0eXBlIExvZ1JvdyA9IHR5cGVvZiBsb2dzLiRpbmZlclNlbGVjdDtcbmV4cG9ydCB0eXBlIExvZ0luc2VydCA9IHR5cGVvZiBsb2dzLiRpbmZlckluc2VydDtcbmV4cG9ydCB0eXBlIFBvc3Rob2dFdmVudFJvdyA9IHR5cGVvZiBwb3N0aG9nRXZlbnRzLiRpbmZlclNlbGVjdDtcbmV4cG9ydCB0eXBlIFBvc3Rob2dFdmVudEluc2VydCA9IHR5cGVvZiBwb3N0aG9nRXZlbnRzLiRpbmZlckluc2VydDtcbiJdLCJuYW1lcyI6WyJwZ1RhYmxlIiwidGV4dCIsImludGVnZXIiLCJib29sZWFuIiwidGltZXN0YW1wIiwidXVpZCIsImRlY2ltYWwiLCJqc29uYiIsInVuaXF1ZUluZGV4IiwibW9uaXRvcmluZyIsImlkIiwicHJpbWFyeUtleSIsImRlZmF1bHRSYW5kb20iLCJyZWNvcmRpbmdJZCIsIm5vdE51bGwiLCJkaXN0aW5jdElkIiwicmVjb3JkaW5nRHVyYXRpb24iLCJzdGFydFRpbWUiLCJ3aXRoVGltZXpvbmUiLCJjbGlja0NvdW50IiwiY29uc29sZUVycm9yQ291bnQiLCJyYWdlQ2xpY2tDb3VudCIsImRlYWRDbGlja0NvdW50Iiwic3RhcnRVcmwiLCJwYXlsb2FkIiwiY3JlYXRlZEF0IiwiZGVmYXVsdE5vdyIsInQiLCJvbiIsImlzc3VlcyIsInVuaXF1ZSIsInBvc3Rob2dDYXRlZ29yeUlkIiwicG9zdGhvZ0lzc3VlVHlwZUlkIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInNldmVyaXR5IiwiY29kZUxvY2F0aW9uIiwiY29kZVNuaXBwZXRIaW50Iiwic3VnZ2VzdGVkRml4Iiwic3RhdHVzIiwiZGVmYXVsdCIsImFwcHJvdmVkIiwiYXBwcm92ZWRSYXRpbmciLCJhcHByb3ZlZEF0IiwidXBkYXRlZEF0IiwiaXNzdWVSZXZpc2lvbnMiLCJpc3N1ZUlkIiwicmVmZXJlbmNlcyIsIm9uRGVsZXRlIiwiaW5zdHJ1Y3Rpb24iLCJzdWdnZXN0ZWRGaXhBZnRlciIsImxvZ3MiLCJkZXZlbG9wZXJSYXRpbmciLCJhZ2VudENvbmZpZGVuY2VTY29yZSIsInByZWNpc2lvbiIsInNjYWxlIiwicG9zdGhvZ0V2ZW50cyIsInBvc3Rob2dFdmVudElkIiwiZXZlbnROYW1lIiwidXJsIiwiZWxlbWVudFRhZyIsImVsZW1lbnRUZXh0Iiwic2Vzc2lvbklkIiwicHJvcGVydGllcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db/schema.ts\n");

/***/ }),

/***/ "(rsc)/./lib/openai-embedding.ts":
/*!*********************************!*\
  !*** ./lib/openai-embedding.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getOpenAIEmbeddingFunction: () => (/* binding */ getOpenAIEmbeddingFunction)\n/* harmony export */ });\n/**\n * Minimal embedding function for Chroma that uses OpenAI's text-embedding-3-small.\n * Use this when CHROMA_API_KEY is set so Chroma can embed documents (avoids @chroma-core/default-embed).\n */ const OPENAI_EMBED_MODEL = \"text-embedding-3-small\";\nasync function embedBatch(texts) {\n    const key = process.env.OPENAI_API_KEY;\n    if (!key) throw new Error(\"OPENAI_API_KEY is required for Chroma embeddings\");\n    const res = await fetch(\"https://api.openai.com/v1/embeddings\", {\n        method: \"POST\",\n        headers: {\n            Authorization: `Bearer ${key}`,\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            model: OPENAI_EMBED_MODEL,\n            input: texts\n        })\n    });\n    if (!res.ok) {\n        const err = await res.text();\n        throw new Error(`OpenAI embeddings failed: ${res.status} ${err}`);\n    }\n    const data = await res.json();\n    return data.data.map((d)=>d.embedding);\n}\n/** Chroma EmbeddingFunction using OpenAI. Return null if OPENAI_API_KEY is not set. */ function getOpenAIEmbeddingFunction() {\n    if (!process.env.OPENAI_API_KEY) return null;\n    return {\n        async generate (texts) {\n            if (texts.length === 0) return [];\n            const batchSize = 100;\n            const out = [];\n            for(let i = 0; i < texts.length; i += batchSize){\n                const chunk = texts.slice(i, i + batchSize);\n                out.push(...await embedBatch(chunk));\n            }\n            return out;\n        },\n        async generateQueryEmbeddings (texts) {\n            return this.generate(texts);\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvb3BlbmFpLWVtYmVkZGluZy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7OztDQUdDLEdBRUQsTUFBTUEscUJBQXFCO0FBRTNCLGVBQWVDLFdBQVdDLEtBQWU7SUFDdkMsTUFBTUMsTUFBTUMsUUFBUUMsR0FBRyxDQUFDQyxjQUFjO0lBQ3RDLElBQUksQ0FBQ0gsS0FBSyxNQUFNLElBQUlJLE1BQU07SUFDMUIsTUFBTUMsTUFBTSxNQUFNQyxNQUFNLHdDQUF3QztRQUM5REMsUUFBUTtRQUNSQyxTQUFTO1lBQ1BDLGVBQWUsQ0FBQyxPQUFPLEVBQUVULElBQUksQ0FBQztZQUM5QixnQkFBZ0I7UUFDbEI7UUFDQVUsTUFBTUMsS0FBS0MsU0FBUyxDQUFDO1lBQUVDLE9BQU9oQjtZQUFvQmlCLE9BQU9mO1FBQU07SUFDakU7SUFDQSxJQUFJLENBQUNNLElBQUlVLEVBQUUsRUFBRTtRQUNYLE1BQU1DLE1BQU0sTUFBTVgsSUFBSVksSUFBSTtRQUMxQixNQUFNLElBQUliLE1BQU0sQ0FBQywwQkFBMEIsRUFBRUMsSUFBSWEsTUFBTSxDQUFDLENBQUMsRUFBRUYsSUFBSSxDQUFDO0lBQ2xFO0lBQ0EsTUFBTUcsT0FBUSxNQUFNZCxJQUFJZSxJQUFJO0lBQzVCLE9BQU9ELEtBQUtBLElBQUksQ0FBQ0UsR0FBRyxDQUFDLENBQUNDLElBQU1BLEVBQUVDLFNBQVM7QUFDekM7QUFFQSxxRkFBcUYsR0FDOUUsU0FBU0M7SUFJZCxJQUFJLENBQUN2QixRQUFRQyxHQUFHLENBQUNDLGNBQWMsRUFBRSxPQUFPO0lBQ3hDLE9BQU87UUFDTCxNQUFNc0IsVUFBUzFCLEtBQWU7WUFDNUIsSUFBSUEsTUFBTTJCLE1BQU0sS0FBSyxHQUFHLE9BQU8sRUFBRTtZQUNqQyxNQUFNQyxZQUFZO1lBQ2xCLE1BQU1DLE1BQWtCLEVBQUU7WUFDMUIsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUk5QixNQUFNMkIsTUFBTSxFQUFFRyxLQUFLRixVQUFXO2dCQUNoRCxNQUFNRyxRQUFRL0IsTUFBTWdDLEtBQUssQ0FBQ0YsR0FBR0EsSUFBSUY7Z0JBQ2pDQyxJQUFJSSxJQUFJLElBQUssTUFBTWxDLFdBQVdnQztZQUNoQztZQUNBLE9BQU9GO1FBQ1Q7UUFDQSxNQUFNSyx5QkFBd0JsQyxLQUFlO1lBQzNDLE9BQU8sSUFBSSxDQUFDMEIsUUFBUSxDQUFFMUI7UUFDeEI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYnVnc2NvdXQtZnJvbnRlbmQvLi9saWIvb3BlbmFpLWVtYmVkZGluZy50cz9mZjljIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTWluaW1hbCBlbWJlZGRpbmcgZnVuY3Rpb24gZm9yIENocm9tYSB0aGF0IHVzZXMgT3BlbkFJJ3MgdGV4dC1lbWJlZGRpbmctMy1zbWFsbC5cbiAqIFVzZSB0aGlzIHdoZW4gQ0hST01BX0FQSV9LRVkgaXMgc2V0IHNvIENocm9tYSBjYW4gZW1iZWQgZG9jdW1lbnRzIChhdm9pZHMgQGNocm9tYS1jb3JlL2RlZmF1bHQtZW1iZWQpLlxuICovXG5cbmNvbnN0IE9QRU5BSV9FTUJFRF9NT0RFTCA9IFwidGV4dC1lbWJlZGRpbmctMy1zbWFsbFwiO1xuXG5hc3luYyBmdW5jdGlvbiBlbWJlZEJhdGNoKHRleHRzOiBzdHJpbmdbXSk6IFByb21pc2U8bnVtYmVyW11bXT4ge1xuICBjb25zdCBrZXkgPSBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWTtcbiAgaWYgKCFrZXkpIHRocm93IG5ldyBFcnJvcihcIk9QRU5BSV9BUElfS0VZIGlzIHJlcXVpcmVkIGZvciBDaHJvbWEgZW1iZWRkaW5nc1wiKTtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXCJodHRwczovL2FwaS5vcGVuYWkuY29tL3YxL2VtYmVkZGluZ3NcIiwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2tleX1gLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG1vZGVsOiBPUEVOQUlfRU1CRURfTU9ERUwsIGlucHV0OiB0ZXh0cyB9KSxcbiAgfSk7XG4gIGlmICghcmVzLm9rKSB7XG4gICAgY29uc3QgZXJyID0gYXdhaXQgcmVzLnRleHQoKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE9wZW5BSSBlbWJlZGRpbmdzIGZhaWxlZDogJHtyZXMuc3RhdHVzfSAke2Vycn1gKTtcbiAgfVxuICBjb25zdCBkYXRhID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIHsgZGF0YTogQXJyYXk8eyBlbWJlZGRpbmc6IG51bWJlcltdIH0+IH07XG4gIHJldHVybiBkYXRhLmRhdGEubWFwKChkKSA9PiBkLmVtYmVkZGluZyk7XG59XG5cbi8qKiBDaHJvbWEgRW1iZWRkaW5nRnVuY3Rpb24gdXNpbmcgT3BlbkFJLiBSZXR1cm4gbnVsbCBpZiBPUEVOQUlfQVBJX0tFWSBpcyBub3Qgc2V0LiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE9wZW5BSUVtYmVkZGluZ0Z1bmN0aW9uKCk6IHtcbiAgZ2VuZXJhdGU6ICh0ZXh0czogc3RyaW5nW10pID0+IFByb21pc2U8bnVtYmVyW11bXT47XG4gIGdlbmVyYXRlUXVlcnlFbWJlZGRpbmdzPzogKHRleHRzOiBzdHJpbmdbXSkgPT4gUHJvbWlzZTxudW1iZXJbXVtdPjtcbn0gfCBudWxsIHtcbiAgaWYgKCFwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSkgcmV0dXJuIG51bGw7XG4gIHJldHVybiB7XG4gICAgYXN5bmMgZ2VuZXJhdGUodGV4dHM6IHN0cmluZ1tdKTogUHJvbWlzZTxudW1iZXJbXVtdPiB7XG4gICAgICBpZiAodGV4dHMubGVuZ3RoID09PSAwKSByZXR1cm4gW107XG4gICAgICBjb25zdCBiYXRjaFNpemUgPSAxMDA7XG4gICAgICBjb25zdCBvdXQ6IG51bWJlcltdW10gPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dHMubGVuZ3RoOyBpICs9IGJhdGNoU2l6ZSkge1xuICAgICAgICBjb25zdCBjaHVuayA9IHRleHRzLnNsaWNlKGksIGkgKyBiYXRjaFNpemUpO1xuICAgICAgICBvdXQucHVzaCguLi4oYXdhaXQgZW1iZWRCYXRjaChjaHVuaykpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvdXQ7XG4gICAgfSxcbiAgICBhc3luYyBnZW5lcmF0ZVF1ZXJ5RW1iZWRkaW5ncyh0ZXh0czogc3RyaW5nW10pOiBQcm9taXNlPG51bWJlcltdW10+IHtcbiAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlISh0ZXh0cyk7XG4gICAgfSxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJPUEVOQUlfRU1CRURfTU9ERUwiLCJlbWJlZEJhdGNoIiwidGV4dHMiLCJrZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJFcnJvciIsInJlcyIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm1vZGVsIiwiaW5wdXQiLCJvayIsImVyciIsInRleHQiLCJzdGF0dXMiLCJkYXRhIiwianNvbiIsIm1hcCIsImQiLCJlbWJlZGRpbmciLCJnZXRPcGVuQUlFbWJlZGRpbmdGdW5jdGlvbiIsImdlbmVyYXRlIiwibGVuZ3RoIiwiYmF0Y2hTaXplIiwib3V0IiwiaSIsImNodW5rIiwic2xpY2UiLCJwdXNoIiwiZ2VuZXJhdGVRdWVyeUVtYmVkZGluZ3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/openai-embedding.ts\n");

/***/ }),

/***/ "(rsc)/./lib/vector-sync.service.ts":
/*!************************************!*\
  !*** ./lib/vector-sync.service.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VectorSyncService: () => (/* binding */ VectorSyncService)\n/* harmony export */ });\n/* harmony import */ var _lib_chroma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/chroma */ \"(rsc)/./lib/chroma.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db/index.ts\");\n/* harmony import */ var _lib_db_schema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db/schema */ \"(rsc)/./lib/db/schema.ts\");\n/**\n * VectorSyncService  syncs Neon (PostgreSQL) data to ChromaDB for vector search and LLM context.\n * Neon is the source of truth; ChromaDB stores embeddings for semantic search.\n *\n * Flow:\n * 1. Ingestion: When data is written to Neon (API routes), call sync*() with the new rows.\n * 2. Manual sync: GET /api/db/sync-to-chroma or npm run vector:sync  syncAll().\n * 3. Auto-sync: GET /api/cron/vector-sync (e.g. Vercel Cron every 10 min)  syncAll().\n */ \n\n\nconst BATCH = 100;\nconst VectorSyncService = {\n    /** Sync monitoring rows to Chroma (call after saving to Neon). */ async syncMonitoring (rows) {\n        if (rows.length === 0) return;\n        const docs = rows.map((r)=>({\n                id: r.recordingId,\n                document: JSON.stringify({\n                    recordingId: r.recordingId,\n                    distinctId: r.distinctId,\n                    recordingDuration: r.recordingDuration,\n                    startTime: r.startTime,\n                    clickCount: r.clickCount,\n                    consoleErrorCount: r.consoleErrorCount,\n                    rageClickCount: r.rageClickCount,\n                    deadClickCount: r.deadClickCount,\n                    startUrl: r.startUrl\n                }),\n                metadata: {\n                    recordingId: r.recordingId,\n                    table: \"monitoring\"\n                }\n            }));\n        await (0,_lib_chroma__WEBPACK_IMPORTED_MODULE_0__.addToChroma)(\"monitoring\", docs);\n    },\n    /** Sync issues to Chroma (call after saving to Neon). Use row.id when present (from DB), else recordingId. */ async syncIssues (rows) {\n        if (rows.length === 0) return;\n        const docs = rows.map((r)=>({\n                id: r.id ?? r.recordingId,\n                document: JSON.stringify({\n                    recordingId: r.recordingId,\n                    title: r.title,\n                    description: r.description,\n                    severity: r.severity,\n                    codeLocation: r.codeLocation,\n                    suggestedFix: r.suggestedFix,\n                    status: r.status\n                }),\n                metadata: {\n                    recordingId: r.recordingId,\n                    table: \"issues\",\n                    severity: r.severity,\n                    title: r.title\n                }\n            }));\n        await (0,_lib_chroma__WEBPACK_IMPORTED_MODULE_0__.addToChroma)(\"issues\", docs);\n    },\n    /** Sync logs to Chroma (call after saving to Neon). */ async syncLogs (rows) {\n        if (rows.length === 0) return;\n        const docs = rows.map((r, i)=>({\n                id: r.id ? `${r.recordingId}-${r.id}` : `${r.recordingId}-${Date.now()}-${i}`,\n                document: JSON.stringify({\n                    recordingId: r.recordingId,\n                    title: r.title,\n                    description: r.description,\n                    severity: r.severity,\n                    suggestedFix: r.suggestedFix,\n                    developerRating: r.developerRating,\n                    agentConfidenceScore: r.agentConfidenceScore\n                }),\n                metadata: {\n                    recordingId: r.recordingId,\n                    table: \"logs\",\n                    severity: r.severity,\n                    title: r.title\n                }\n            }));\n        await (0,_lib_chroma__WEBPACK_IMPORTED_MODULE_0__.addToChroma)(\"logs\", docs);\n    },\n    /** Sync PostHog events to Chroma (call after saving to Neon). */ async syncPosthogEvents (rows) {\n        if (rows.length === 0) return;\n        const docs = rows.map((r)=>({\n                id: r.posthogEventId,\n                document: JSON.stringify({\n                    eventName: r.eventName,\n                    url: r.url,\n                    elementTag: r.elementTag,\n                    elementText: r.elementText,\n                    timestamp: r.timestamp,\n                    distinctId: r.distinctId\n                }),\n                metadata: {\n                    posthogEventId: r.posthogEventId,\n                    table: \"posthog_events\",\n                    eventName: r.eventName\n                }\n            }));\n        await (0,_lib_chroma__WEBPACK_IMPORTED_MODULE_0__.addToChroma)(\"posthog_events\", docs);\n    },\n    /**\n   * Read all data from Neon and sync to Chroma. Use for manual backfill or auto-sync (cron).\n   */ async syncAll () {\n        const monitoringRows = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.select().from(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.monitoring);\n        for(let i = 0; i < monitoringRows.length; i += BATCH){\n            await VectorSyncService.syncMonitoring(monitoringRows.slice(i, i + BATCH));\n        }\n        const issuesRows = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.select().from(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.issues);\n        for(let i = 0; i < issuesRows.length; i += BATCH){\n            await VectorSyncService.syncIssues(issuesRows.slice(i, i + BATCH));\n        }\n        const logsRows = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.select().from(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.logs);\n        for(let i = 0; i < logsRows.length; i += BATCH){\n            await VectorSyncService.syncLogs(logsRows.slice(i, i + BATCH));\n        }\n        const eventsRows = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.select().from(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.posthogEvents);\n        for(let i = 0; i < eventsRows.length; i += BATCH){\n            await VectorSyncService.syncPosthogEvents(eventsRows.slice(i, i + BATCH));\n        }\n        return {\n            monitoring: monitoringRows.length,\n            issues: issuesRows.length,\n            logs: logsRows.length,\n            posthog_events: eventsRows.length\n        };\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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akQsTUFBTUMsa0JBQWtCc0IsVUFBVSxDQUFDeUIsV0FBV0QsS0FBSyxDQUFDaEIsR0FBR0EsSUFBSS9CO1FBQzdEO1FBRUEsTUFBTWlELFdBQVcsTUFBTTFELHVDQUFFQSxDQUFDc0QsTUFBTSxHQUFHQyxJQUFJLENBQUNuRCxnREFBU0E7UUFDakQsSUFBSyxJQUFJb0MsSUFBSSxHQUFHQSxJQUFJa0IsU0FBUzdDLE1BQU0sRUFBRTJCLEtBQUsvQixNQUFPO1lBQy9DLE1BQU1DLGtCQUFrQjZCLFFBQVEsQ0FBQ21CLFNBQVNGLEtBQUssQ0FBQ2hCLEdBQUdBLElBQUkvQjtRQUN6RDtRQUVBLE1BQU1rRCxhQUFhLE1BQU0zRCx1Q0FBRUEsQ0FBQ3NELE1BQU0sR0FBR0MsSUFBSSxDQUFDL0MseURBQWtCQTtRQUM1RCxJQUFLLElBQUlnQyxJQUFJLEdBQUdBLElBQUltQixXQUFXOUMsTUFBTSxFQUFFMkIsS0FBSy9CLE1BQU87WUFDakQsTUFBTUMsa0JBQWtCbUMsaUJBQWlCLENBQUNjLFdBQVdILEtBQUssQ0FBQ2hCLEdBQUdBLElBQUkvQjtRQUNwRTtRQUVBLE9BQU87WUFDTEosWUFBWWdELGVBQWV4QyxNQUFNO1lBQ2pDWixRQUFRd0QsV0FBVzVDLE1BQU07WUFDekJWLE1BQU11RCxTQUFTN0MsTUFBTTtZQUNyQitDLGdCQUFnQkQsV0FBVzlDLE1BQU07UUFDbkM7SUFDRjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9idWdzY291dC1mcm9udGVuZC8uL2xpYi92ZWN0b3Itc3luYy5zZXJ2aWNlLnRzP2FjMDIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBWZWN0b3JTeW5jU2VydmljZSDigJMgc3luY3MgTmVvbiAoUG9zdGdyZVNRTCkgZGF0YSB0byBDaHJvbWFEQiBmb3IgdmVjdG9yIHNlYXJjaCBhbmQgTExNIGNvbnRleHQuXG4gKiBOZW9uIGlzIHRoZSBzb3VyY2Ugb2YgdHJ1dGg7IENocm9tYURCIHN0b3JlcyBlbWJlZGRpbmdzIGZvciBzZW1hbnRpYyBzZWFyY2guXG4gKlxuICogRmxvdzpcbiAqIDEuIEluZ2VzdGlvbjogV2hlbiBkYXRhIGlzIHdyaXR0ZW4gdG8gTmVvbiAoQVBJIHJvdXRlcyksIGNhbGwgc3luYyooKSB3aXRoIHRoZSBuZXcgcm93cy5cbiAqIDIuIE1hbnVhbCBzeW5jOiBHRVQgL2FwaS9kYi9zeW5jLXRvLWNocm9tYSBvciBucG0gcnVuIHZlY3RvcjpzeW5jIOKGkiBzeW5jQWxsKCkuXG4gKiAzLiBBdXRvLXN5bmM6IEdFVCAvYXBpL2Nyb24vdmVjdG9yLXN5bmMgKGUuZy4gVmVyY2VsIENyb24gZXZlcnkgMTAgbWluKSDihpIgc3luY0FsbCgpLlxuICovXG5cbmltcG9ydCB7IGFkZFRvQ2hyb21hLCB0eXBlIENocm9tYURvYyB9IGZyb20gXCJAL2xpYi9jaHJvbWFcIjtcbmltcG9ydCB7IGRiIH0gZnJvbSBcIkAvbGliL2RiXCI7XG5pbXBvcnQge1xuICBpc3N1ZXMgYXMgaXNzdWVzVGFibGUsXG4gIGxvZ3MgYXMgbG9nc1RhYmxlLFxuICBtb25pdG9yaW5nIGFzIG1vbml0b3JpbmdUYWJsZSxcbiAgcG9zdGhvZ0V2ZW50cyBhcyBwb3N0aG9nRXZlbnRzVGFibGUsXG59IGZyb20gXCJAL2xpYi9kYi9zY2hlbWFcIjtcbmltcG9ydCB0eXBlIHsgTW9uaXRvcmluZ1JvdywgUG9zdGhvZ0V2ZW50Um93IH0gZnJvbSBcIkAvbGliL2RiL3NjaGVtYVwiO1xuXG5jb25zdCBCQVRDSCA9IDEwMDtcblxuLyoqIE1vbml0b3Jpbmcgcm93IHNoYXBlIChmcm9tIE5lb24gb3IgZnJvbSBpbmdlc3Rpb24gcGF5bG9hZCkuICovXG50eXBlIE1vbml0b3JpbmdMaWtlID0gUGljazxcbiAgTW9uaXRvcmluZ1JvdyxcbiAgXCJyZWNvcmRpbmdJZFwiIHwgXCJkaXN0aW5jdElkXCIgfCBcInJlY29yZGluZ0R1cmF0aW9uXCIgfCBcInN0YXJ0VGltZVwiIHwgXCJjbGlja0NvdW50XCIgfCBcImNvbnNvbGVFcnJvckNvdW50XCIgfCBcInJhZ2VDbGlja0NvdW50XCIgfCBcImRlYWRDbGlja0NvdW50XCIgfCBcInN0YXJ0VXJsXCJcbj47XG5cbi8qKiBJc3N1ZSByb3cgc2hhcGUgKGZyb20gTmVvbiBvciBpbmdlc3Rpb24pLiBpZCBpcyBzZXQgd2hlbiBzeW5jaW5nIGZyb20gREIgKHN5bmNBbGwpLiAqL1xudHlwZSBJc3N1ZUxpa2UgPSB7XG4gIGlkPzogc3RyaW5nO1xuICByZWNvcmRpbmdJZDogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBzZXZlcml0eTogc3RyaW5nO1xuICBjb2RlTG9jYXRpb246IHN0cmluZztcbiAgc3VnZ2VzdGVkRml4Pzogc3RyaW5nIHwgbnVsbDtcbiAgc3RhdHVzPzogc3RyaW5nO1xufTtcblxuLyoqIExvZyByb3cgc2hhcGUgb3IgaW5nZXN0aW9uIGJvZHkuICovXG50eXBlIExvZ0xpa2UgPSB7XG4gIGlkPzogc3RyaW5nO1xuICByZWNvcmRpbmdJZDogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBzZXZlcml0eTogc3RyaW5nO1xuICBzdWdnZXN0ZWRGaXg6IHN0cmluZztcbiAgZGV2ZWxvcGVyUmF0aW5nPzogbnVtYmVyIHwgbnVsbDtcbiAgYWdlbnRDb25maWRlbmNlU2NvcmU/OiBzdHJpbmcgfCBudW1iZXIgfCBudWxsO1xufTtcblxuLyoqIFBvc3RIb2cgZXZlbnQgcm93IHNoYXBlLiAqL1xudHlwZSBQb3N0aG9nRXZlbnRMaWtlID0gUGljazxcbiAgUG9zdGhvZ0V2ZW50Um93LFxuICBcInBvc3Rob2dFdmVudElkXCIgfCBcImV2ZW50TmFtZVwiIHwgXCJkaXN0aW5jdElkXCIgfCBcInRpbWVzdGFtcFwiIHwgXCJ1cmxcIiB8IFwiZWxlbWVudFRhZ1wiIHwgXCJlbGVtZW50VGV4dFwiXG4+O1xuXG5leHBvcnQgY29uc3QgVmVjdG9yU3luY1NlcnZpY2UgPSB7XG4gIC8qKiBTeW5jIG1vbml0b3Jpbmcgcm93cyB0byBDaHJvbWEgKGNhbGwgYWZ0ZXIgc2F2aW5nIHRvIE5lb24pLiAqL1xuICBhc3luYyBzeW5jTW9uaXRvcmluZyhyb3dzOiBNb25pdG9yaW5nTGlrZVtdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHJvd3MubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgY29uc3QgZG9jczogQ2hyb21hRG9jW10gPSByb3dzLm1hcCgocikgPT4gKHtcbiAgICAgIGlkOiByLnJlY29yZGluZ0lkLFxuICAgICAgZG9jdW1lbnQ6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgcmVjb3JkaW5nSWQ6IHIucmVjb3JkaW5nSWQsXG4gICAgICAgIGRpc3RpbmN0SWQ6IHIuZGlzdGluY3RJZCxcbiAgICAgICAgcmVjb3JkaW5nRHVyYXRpb246IHIucmVjb3JkaW5nRHVyYXRpb24sXG4gICAgICAgIHN0YXJ0VGltZTogci5zdGFydFRpbWUsXG4gICAgICAgIGNsaWNrQ291bnQ6IHIuY2xpY2tDb3VudCxcbiAgICAgICAgY29uc29sZUVycm9yQ291bnQ6IHIuY29uc29sZUVycm9yQ291bnQsXG4gICAgICAgIHJhZ2VDbGlja0NvdW50OiByLnJhZ2VDbGlja0NvdW50LFxuICAgICAgICBkZWFkQ2xpY2tDb3VudDogci5kZWFkQ2xpY2tDb3VudCxcbiAgICAgICAgc3RhcnRVcmw6IHIuc3RhcnRVcmwsXG4gICAgICB9KSxcbiAgICAgIG1ldGFkYXRhOiB7IHJlY29yZGluZ0lkOiByLnJlY29yZGluZ0lkLCB0YWJsZTogXCJtb25pdG9yaW5nXCIgfSxcbiAgICB9KSk7XG4gICAgYXdhaXQgYWRkVG9DaHJvbWEoXCJtb25pdG9yaW5nXCIsIGRvY3MpO1xuICB9LFxuXG4gIC8qKiBTeW5jIGlzc3VlcyB0byBDaHJvbWEgKGNhbGwgYWZ0ZXIgc2F2aW5nIHRvIE5lb24pLiBVc2Ugcm93LmlkIHdoZW4gcHJlc2VudCAoZnJvbSBEQiksIGVsc2UgcmVjb3JkaW5nSWQuICovXG4gIGFzeW5jIHN5bmNJc3N1ZXMocm93czogSXNzdWVMaWtlW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAocm93cy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICBjb25zdCBkb2NzOiBDaHJvbWFEb2NbXSA9IHJvd3MubWFwKChyKSA9PiAoe1xuICAgICAgaWQ6IHIuaWQgPz8gci5yZWNvcmRpbmdJZCxcbiAgICAgIGRvY3VtZW50OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHJlY29yZGluZ0lkOiByLnJlY29yZGluZ0lkLFxuICAgICAgICB0aXRsZTogci50aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb246IHIuZGVzY3JpcHRpb24sXG4gICAgICAgIHNldmVyaXR5OiByLnNldmVyaXR5LFxuICAgICAgICBjb2RlTG9jYXRpb246IHIuY29kZUxvY2F0aW9uLFxuICAgICAgICBzdWdnZXN0ZWRGaXg6IHIuc3VnZ2VzdGVkRml4LFxuICAgICAgICBzdGF0dXM6IHIuc3RhdHVzLFxuICAgICAgfSksXG4gICAgICBtZXRhZGF0YTogeyByZWNvcmRpbmdJZDogci5yZWNvcmRpbmdJZCwgdGFibGU6IFwiaXNzdWVzXCIsIHNldmVyaXR5OiByLnNldmVyaXR5LCB0aXRsZTogci50aXRsZSB9LFxuICAgIH0pKTtcbiAgICBhd2FpdCBhZGRUb0Nocm9tYShcImlzc3Vlc1wiLCBkb2NzKTtcbiAgfSxcblxuICAvKiogU3luYyBsb2dzIHRvIENocm9tYSAoY2FsbCBhZnRlciBzYXZpbmcgdG8gTmVvbikuICovXG4gIGFzeW5jIHN5bmNMb2dzKHJvd3M6IExvZ0xpa2VbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmIChyb3dzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIGNvbnN0IGRvY3M6IENocm9tYURvY1tdID0gcm93cy5tYXAoKHIsIGkpID0+ICh7XG4gICAgICBpZDogci5pZCA/IGAke3IucmVjb3JkaW5nSWR9LSR7ci5pZH1gIDogYCR7ci5yZWNvcmRpbmdJZH0tJHtEYXRlLm5vdygpfS0ke2l9YCxcbiAgICAgIGRvY3VtZW50OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHJlY29yZGluZ0lkOiByLnJlY29yZGluZ0lkLFxuICAgICAgICB0aXRsZTogci50aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb246IHIuZGVzY3JpcHRpb24sXG4gICAgICAgIHNldmVyaXR5OiByLnNldmVyaXR5LFxuICAgICAgICBzdWdnZXN0ZWRGaXg6IHIuc3VnZ2VzdGVkRml4LFxuICAgICAgICBkZXZlbG9wZXJSYXRpbmc6IHIuZGV2ZWxvcGVyUmF0aW5nLFxuICAgICAgICBhZ2VudENvbmZpZGVuY2VTY29yZTogci5hZ2VudENvbmZpZGVuY2VTY29yZSxcbiAgICAgIH0pLFxuICAgICAgbWV0YWRhdGE6IHsgcmVjb3JkaW5nSWQ6IHIucmVjb3JkaW5nSWQsIHRhYmxlOiBcImxvZ3NcIiwgc2V2ZXJpdHk6IHIuc2V2ZXJpdHksIHRpdGxlOiByLnRpdGxlIH0sXG4gICAgfSkpO1xuICAgIGF3YWl0IGFkZFRvQ2hyb21hKFwibG9nc1wiLCBkb2NzKTtcbiAgfSxcblxuICAvKiogU3luYyBQb3N0SG9nIGV2ZW50cyB0byBDaHJvbWEgKGNhbGwgYWZ0ZXIgc2F2aW5nIHRvIE5lb24pLiAqL1xuICBhc3luYyBzeW5jUG9zdGhvZ0V2ZW50cyhyb3dzOiBQb3N0aG9nRXZlbnRMaWtlW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAocm93cy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICBjb25zdCBkb2NzOiBDaHJvbWFEb2NbXSA9IHJvd3MubWFwKChyKSA9PiAoe1xuICAgICAgaWQ6IHIucG9zdGhvZ0V2ZW50SWQsXG4gICAgICBkb2N1bWVudDogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBldmVudE5hbWU6IHIuZXZlbnROYW1lLFxuICAgICAgICB1cmw6IHIudXJsLFxuICAgICAgICBlbGVtZW50VGFnOiByLmVsZW1lbnRUYWcsXG4gICAgICAgIGVsZW1lbnRUZXh0OiByLmVsZW1lbnRUZXh0LFxuICAgICAgICB0aW1lc3RhbXA6IHIudGltZXN0YW1wLFxuICAgICAgICBkaXN0aW5jdElkOiByLmRpc3RpbmN0SWQsXG4gICAgICB9KSxcbiAgICAgIG1ldGFkYXRhOiB7IHBvc3Rob2dFdmVudElkOiByLnBvc3Rob2dFdmVudElkLCB0YWJsZTogXCJwb3N0aG9nX2V2ZW50c1wiLCBldmVudE5hbWU6IHIuZXZlbnROYW1lIH0sXG4gICAgfSkpO1xuICAgIGF3YWl0IGFkZFRvQ2hyb21hKFwicG9zdGhvZ19ldmVudHNcIiwgZG9jcyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlYWQgYWxsIGRhdGEgZnJvbSBOZW9uIGFuZCBzeW5jIHRvIENocm9tYS4gVXNlIGZvciBtYW51YWwgYmFja2ZpbGwgb3IgYXV0by1zeW5jIChjcm9uKS5cbiAgICovXG4gIGFzeW5jIHN5bmNBbGwoKTogUHJvbWlzZTx7IG1vbml0b3Jpbmc6IG51bWJlcjsgaXNzdWVzOiBudW1iZXI7IGxvZ3M6IG51bWJlcjsgcG9zdGhvZ19ldmVudHM6IG51bWJlciB9PiB7XG4gICAgY29uc3QgbW9uaXRvcmluZ1Jvd3MgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKG1vbml0b3JpbmdUYWJsZSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtb25pdG9yaW5nUm93cy5sZW5ndGg7IGkgKz0gQkFUQ0gpIHtcbiAgICAgIGF3YWl0IFZlY3RvclN5bmNTZXJ2aWNlLnN5bmNNb25pdG9yaW5nKG1vbml0b3JpbmdSb3dzLnNsaWNlKGksIGkgKyBCQVRDSCkpO1xuICAgIH1cblxuICAgIGNvbnN0IGlzc3Vlc1Jvd3MgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKGlzc3Vlc1RhYmxlKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlzc3Vlc1Jvd3MubGVuZ3RoOyBpICs9IEJBVENIKSB7XG4gICAgICBhd2FpdCBWZWN0b3JTeW5jU2VydmljZS5zeW5jSXNzdWVzKGlzc3Vlc1Jvd3Muc2xpY2UoaSwgaSArIEJBVENIKSk7XG4gICAgfVxuXG4gICAgY29uc3QgbG9nc1Jvd3MgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKGxvZ3NUYWJsZSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2dzUm93cy5sZW5ndGg7IGkgKz0gQkFUQ0gpIHtcbiAgICAgIGF3YWl0IFZlY3RvclN5bmNTZXJ2aWNlLnN5bmNMb2dzKGxvZ3NSb3dzLnNsaWNlKGksIGkgKyBCQVRDSCkpO1xuICAgIH1cblxuICAgIGNvbnN0IGV2ZW50c1Jvd3MgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKHBvc3Rob2dFdmVudHNUYWJsZSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudHNSb3dzLmxlbmd0aDsgaSArPSBCQVRDSCkge1xuICAgICAgYXdhaXQgVmVjdG9yU3luY1NlcnZpY2Uuc3luY1Bvc3Rob2dFdmVudHMoZXZlbnRzUm93cy5zbGljZShpLCBpICsgQkFUQ0gpKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgbW9uaXRvcmluZzogbW9uaXRvcmluZ1Jvd3MubGVuZ3RoLFxuICAgICAgaXNzdWVzOiBpc3N1ZXNSb3dzLmxlbmd0aCxcbiAgICAgIGxvZ3M6IGxvZ3NSb3dzLmxlbmd0aCxcbiAgICAgIHBvc3Rob2dfZXZlbnRzOiBldmVudHNSb3dzLmxlbmd0aCxcbiAgICB9O1xuICB9LFxufTtcbiJdLCJuYW1lcyI6WyJhZGRUb0Nocm9tYSIsImRiIiwiaXNzdWVzIiwiaXNzdWVzVGFibGUiLCJsb2dzIiwibG9nc1RhYmxlIiwibW9uaXRvcmluZyIsIm1vbml0b3JpbmdUYWJsZSIsInBvc3Rob2dFdmVudHMiLCJwb3N0aG9nRXZlbnRzVGFibGUiLCJCQVRDSCIsIlZlY3RvclN5bmNTZXJ2aWNlIiwic3luY01vbml0b3JpbmciLCJyb3dzIiwibGVuZ3RoIiwiZG9jcyIsIm1hcCIsInIiLCJpZCIsInJlY29yZGluZ0lkIiwiZG9jdW1lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGlzdGluY3RJZCIsInJlY29yZGluZ0R1cmF0aW9uIiwic3RhcnRUaW1lIiwiY2xpY2tDb3VudCIsImNvbnNvbGVFcnJvckNvdW50IiwicmFnZUNsaWNrQ291bnQiLCJkZWFkQ2xpY2tDb3VudCIsInN0YXJ0VXJsIiwibWV0YWRhdGEiLCJ0YWJsZSIsInN5bmNJc3N1ZXMiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwic2V2ZXJpdHkiLCJjb2RlTG9jYXRpb24iLCJzdWdnZXN0ZWRGaXgiLCJzdGF0dXMiLCJzeW5jTG9ncyIsImkiLCJEYXRlIiwibm93IiwiZGV2ZWxvcGVyUmF0aW5nIiwiYWdlbnRDb25maWRlbmNlU2NvcmUiLCJzeW5jUG9zdGhvZ0V2ZW50cyIsInBvc3Rob2dFdmVudElkIiwiZXZlbnROYW1lIiwidXJsIiwiZWxlbWVudFRhZyIsImVsZW1lbnRUZXh0IiwidGltZXN0YW1wIiwic3luY0FsbCIsIm1vbml0b3JpbmdSb3dzIiwic2VsZWN0IiwiZnJvbSIsInNsaWNlIiwiaXNzdWVzUm93cyIsImxvZ3NSb3dzIiwiZXZlbnRzUm93cyIsInBvc3Rob2dfZXZlbnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/vector-sync.service.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/drizzle-orm","vendor-chunks/chromadb","vendor-chunks/@neondatabase"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdb%2Fmonitoring%2Froute&page=%2Fapi%2Fdb%2Fmonitoring%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdb%2Fmonitoring%2Froute.ts&appDir=C%3A%5CUsers%5CRISHAY%5CDownloads%5CbugScout%20Frontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRISHAY%5CDownloads%5CbugScout%20Frontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();