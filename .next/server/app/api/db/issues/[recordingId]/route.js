"use strict";(()=>{var e={};e.id=982,e.ids=[982],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},67139:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>c,routeModule:()=>p,serverHooks:()=>_,staticGenerationAsyncStorage:()=>g});var i={};o.r(i),o.d(i,{PATCH:()=>l});var r=o(73278),n=o(45002),s=o(54877),d=o(68420),a=o(27382),u=o(29785);async function l(e,{params:t}){if(!process.env.DATABASE_URL)return Response.json({ok:!1},{status:503});try{let{recordingId:o}=await t,i=await e.json(),r={updatedAt:new Date};return"string"==typeof i.status&&(r.status=i.status),"boolean"==typeof i.approved&&(r.approved=i.approved),"number"==typeof i.approvedRating&&(r.approvedRating=i.approvedRating),void 0!==i.approvedAt&&(r.approvedAt=i.approvedAt?new Date(i.approvedAt):null),"string"==typeof i.suggestedFix&&(r.suggestedFix=i.suggestedFix),await d.db.update(a.issues).set(r).where((0,u.eq)(a.issues.recordingId,o)),Response.json({ok:!0})}catch(e){return console.error("PATCH /api/db/issues/[recordingId] error:",e),Response.json({ok:!1},{status:500})}}let p=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/db/issues/[recordingId]/route",pathname:"/api/db/issues/[recordingId]",filename:"route",bundlePath:"app/api/db/issues/[recordingId]/route"},resolvedPagePath:"C:\\Users\\RISHAY\\Downloads\\bugScout Frontend\\app\\api\\db\\issues\\[recordingId]\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:c,staticGenerationAsyncStorage:g,serverHooks:_}=p,f="/api/db/issues/[recordingId]/route";function v(){return(0,s.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:g})}},68420:(e,t,o)=>{o.d(t,{db:()=>d});var i=o(40546),r=o(92512),n=o(27382);let s=(0,i.qn)(process.env.DATABASE_URL),d=(0,r.tS)(s,{schema:n})},27382:(e,t,o)=>{o.r(t),o.d(t,{issueRevisions:()=>_,issues:()=>g,logs:()=>f,monitoring:()=>c,posthogEvents:()=>v});var i=o(61951),r=o(59397),n=o(39411),s=o(84006),d=o(70380),a=o(83204),u=o(10950),l=o(21305),p=o(67691);let c=(0,i.af)("monitoring",{id:(0,r.Vj)("id").primaryKey().defaultRandom(),recordingId:(0,n.fL)("recording_id").notNull(),distinctId:(0,n.fL)("distinct_id"),recordingDuration:(0,s._L)("recording_duration"),startTime:(0,d.AB)("start_time",{withTimezone:!0}),clickCount:(0,s._L)("click_count"),consoleErrorCount:(0,s._L)("console_error_count"),rageClickCount:(0,s._L)("rage_click_count"),deadClickCount:(0,s._L)("dead_click_count"),startUrl:(0,n.fL)("start_url"),payload:(0,a.JB)("payload"),createdAt:(0,d.AB)("created_at",{withTimezone:!0}).defaultNow().notNull()},e=>[(0,u.o9)("monitoring_recording_id_idx").on(e.recordingId)]),g=(0,i.af)("issues",{id:(0,r.Vj)("id").primaryKey().defaultRandom(),recordingId:(0,n.fL)("recording_id").notNull().unique(),posthogCategoryId:(0,n.fL)("posthog_category_id").notNull(),posthogIssueTypeId:(0,n.fL)("posthog_issue_type_id").notNull(),title:(0,n.fL)("title").notNull(),description:(0,n.fL)("description").notNull(),severity:(0,n.fL)("severity").notNull(),codeLocation:(0,n.fL)("code_location").notNull(),codeSnippetHint:(0,n.fL)("code_snippet_hint"),startUrl:(0,n.fL)("start_url"),suggestedFix:(0,n.fL)("suggested_fix"),status:(0,n.fL)("status").notNull().default("Unresolved"),approved:(0,l.O7)("approved").notNull().default(!1),approvedRating:(0,s._L)("approved_rating"),approvedAt:(0,d.AB)("approved_at",{withTimezone:!0}),createdAt:(0,d.AB)("created_at",{withTimezone:!0}).defaultNow().notNull(),updatedAt:(0,d.AB)("updated_at",{withTimezone:!0}).defaultNow().notNull()}),_=(0,i.af)("issue_revisions",{id:(0,r.Vj)("id").primaryKey().defaultRandom(),issueId:(0,r.Vj)("issue_id").notNull().references(()=>g.id,{onDelete:"cascade"}),instruction:(0,n.fL)("instruction").notNull(),suggestedFixAfter:(0,n.fL)("suggested_fix_after"),createdAt:(0,d.AB)("created_at",{withTimezone:!0}).defaultNow().notNull()}),f=(0,i.af)("logs",{id:(0,r.Vj)("id").primaryKey().defaultRandom(),issueId:(0,r.Vj)("issue_id").references(()=>g.id),recordingId:(0,n.fL)("recording_id").notNull(),title:(0,n.fL)("title").notNull(),description:(0,n.fL)("description").notNull(),severity:(0,n.fL)("severity").notNull(),suggestedFix:(0,n.fL)("suggested_fix").notNull(),developerRating:(0,s._L)("developer_rating"),agentConfidenceScore:(0,p.gH)("agent_confidence_score",{precision:3,scale:2}),createdAt:(0,d.AB)("created_at",{withTimezone:!0}).defaultNow().notNull()}),v=(0,i.af)("posthog_events",{id:(0,r.Vj)("id").primaryKey().defaultRandom(),posthogEventId:(0,n.fL)("posthog_event_id").notNull(),eventName:(0,n.fL)("event_name").notNull(),distinctId:(0,n.fL)("distinct_id"),timestamp:(0,d.AB)("timestamp",{withTimezone:!0}).notNull(),url:(0,n.fL)("url"),elementTag:(0,n.fL)("element_tag"),elementText:(0,n.fL)("element_text"),sessionId:(0,n.fL)("session_id"),properties:(0,a.JB)("properties"),createdAt:(0,d.AB)("created_at",{withTimezone:!0}).defaultNow().notNull()},e=>[(0,u.o9)("posthog_events_posthog_event_id_idx").on(e.posthogEventId)])}};var t=require("../../../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),i=t.X(0,[379,321],()=>o(67139));module.exports=i})();